/*!
 * Draggabilly PACKAGED v2.2.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */

!function(i,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return e(i,t)}):"object"==typeof module&&module.exports?module.exports=e(i,require("jquery")):i.jQueryBridget=e(i,i.jQuery)}(window,function(t,i){"use strict";var c=Array.prototype.slice,e=t.console,p=void 0===e?function(){}:function(t){e.error(t)};function n(d,o,u){(u=u||i||t.jQuery)&&(o.prototype.option||(o.prototype.option=function(t){u.isPlainObject(t)&&(this.options=u.extend(!0,this.options,t))}),u.fn[d]=function(t){if("string"==typeof t){var i=c.call(arguments,1);return s=i,a="$()."+d+'("'+(r=t)+'")',(e=this).each(function(t,i){var e=u.data(i,d);if(e){var n=e[r];if(n&&"_"!=r.charAt(0)){var o=n.apply(e,s);h=void 0===h?o:h}else p(a+" is not a valid method")}else p(d+" not initialized. Cannot call methods, i.e. "+a)}),void 0!==h?h:e}var e,r,s,h,a,n;return n=t,this.each(function(t,i){var e=u.data(i,d);e?(e.option(n),e._init()):(e=new o(i,n),u.data(i,d,e))}),this},r(u))}function r(t){!t||t&&t.bridget||(t.bridget=n)}return r(i||t.jQuery),n}),function(t,i){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return i()}):"object"==typeof module&&module.exports?module.exports=i():t.getSize=i()}(window,function(){"use strict";function m(t){var i=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(i)&&i}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},y=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],b=y.length;function E(t){var i=getComputedStyle(t);return i||e("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}var _,x=!1;function P(t){if(function(){if(!x){x=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(t);var e=E(t);P.isBoxSizeOuter=_=200==m(e.width),i.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=E(t);if("none"==i.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0;i<b;i++)t[y[i]]=0;return t}();var e={};e.width=t.offsetWidth,e.height=t.offsetHeight;for(var n=e.isBorderBox="border-box"==i.boxSizing,o=0;o<b;o++){var r=y[o],s=i[r],h=parseFloat(s);e[r]=isNaN(h)?0:h}var a=e.paddingLeft+e.paddingRight,d=e.paddingTop+e.paddingBottom,u=e.marginLeft+e.marginRight,c=e.marginTop+e.marginBottom,p=e.borderLeftWidth+e.borderRightWidth,f=e.borderTopWidth+e.borderBottomWidth,g=n&&_,l=m(i.width);!1!==l&&(e.width=l+(g?0:a+p));var v=m(i.height);return!1!==v&&(e.height=v+(g?0:d+f)),e.innerWidth=e.width-(a+p),e.innerHeight=e.height-(d+f),e.outerWidth=e.width+u,e.outerHeight=e.height+c,e}}return P}),function(t,i){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",i):"object"==typeof module&&module.exports?module.exports=i():t.EvEmitter=i()}("undefined"!=typeof window?window:this,function(){function t(){}var i=t.prototype;return i.on=function(t,i){if(t&&i){var e=this._events=this._events||{},n=e[t]=e[t]||[];return-1==n.indexOf(i)&&n.push(i),this}},i.once=function(t,i){if(t&&i){this.on(t,i);var e=this._onceEvents=this._onceEvents||{};return(e[t]=e[t]||{})[i]=!0,this}},i.off=function(t,i){var e=this._events&&this._events[t];if(e&&e.length){var n=e.indexOf(i);return-1!=n&&e.splice(n,1),this}},i.emitEvent=function(t,i){var e=this._events&&this._events[t];if(e&&e.length){e=e.slice(0),i=i||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<e.length;o++){var r=e[o];n&&n[r]&&(this.off(t,r),delete n[r]),r.apply(this,i)}return this}},i.allOff=function(){delete this._events,delete this._onceEvents},t}),function(i,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(t){return e(i,t)}):"object"==typeof module&&module.exports?module.exports=e(i,require("ev-emitter")):i.Unipointer=e(i,i.EvEmitter)}(window,function(o,t){function i(){}var e=i.prototype=Object.create(t.prototype);e.bindStartEvent=function(t){this._bindStartEvent(t,!0)},e.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},e._bindStartEvent=function(t,i){var e=(i=void 0===i||i)?"addEventListener":"removeEventListener",n="mousedown";o.PointerEvent?n="pointerdown":"ontouchstart"in o&&(n="touchstart"),t[e](n,this)},e.handleEvent=function(t){var i="on"+t.type;this[i]&&this[i](t)},e.getTouch=function(t){for(var i=0;i<t.length;i++){var e=t[i];if(e.identifier==this.pointerIdentifier)return e}},e.onmousedown=function(t){var i=t.button;i&&0!==i&&1!==i||this._pointerDown(t,t)},e.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},e.onpointerdown=function(t){this._pointerDown(t,t)},e._pointerDown=function(t,i){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==i.pointerId?i.pointerId:i.identifier,this.pointerDown(t,i))},e.pointerDown=function(t,i){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,i])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return e._bindPostStartEvents=function(t){if(t){var i=n[t.type];i.forEach(function(t){o.addEventListener(t,this)},this),this._boundPointerEvents=i}},e._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){o.removeEventListener(t,this)},this),delete this._boundPointerEvents)},e.onmousemove=function(t){this._pointerMove(t,t)},e.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},e.ontouchmove=function(t){var i=this.getTouch(t.changedTouches);i&&this._pointerMove(t,i)},e._pointerMove=function(t,i){this.pointerMove(t,i)},e.pointerMove=function(t,i){this.emitEvent("pointerMove",[t,i])},e.onmouseup=function(t){this._pointerUp(t,t)},e.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},e.ontouchend=function(t){var i=this.getTouch(t.changedTouches);i&&this._pointerUp(t,i)},e._pointerUp=function(t,i){this._pointerDone(),this.pointerUp(t,i)},e.pointerUp=function(t,i){this.emitEvent("pointerUp",[t,i])},e._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},e._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},e.pointerDone=function(){},e.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},e.ontouchcancel=function(t){var i=this.getTouch(t.changedTouches);i&&this._pointerCancel(t,i)},e._pointerCancel=function(t,i){this._pointerDone(),this.pointerCancel(t,i)},e.pointerCancel=function(t,i){this.emitEvent("pointerCancel",[t,i])},i.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},i}),function(i,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(t){return e(i,t)}):"object"==typeof module&&module.exports?module.exports=e(i,require("unipointer")):i.Unidragger=e(i,i.Unipointer)}(window,function(r,t){function i(){}var e=i.prototype=Object.create(t.prototype);e.bindHandles=function(){this._bindHandles(!0)},e.unbindHandles=function(){this._bindHandles(!1)},e._bindHandles=function(t){for(var i=(t=void 0===t||t)?"addEventListener":"removeEventListener",e=t?this._touchActionValue:"",n=0;n<this.handles.length;n++){var o=this.handles[n];this._bindStartEvent(o,t),o[i]("click",this),r.PointerEvent&&(o.style.touchAction=e)}},e._touchActionValue="none",e.pointerDown=function(t,i){this.okayPointerDown(t)&&(this.pointerDownPointer=i,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,i]))};var o={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},s={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return e.okayPointerDown=function(t){var i=o[t.target.nodeName],e=s[t.target.type],n=!i||e;return n||this._pointerReset(),n},e.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},e.pointerMove=function(t,i){var e=this._dragPointerMove(t,i);this.emitEvent("pointerMove",[t,i,e]),this._dragMove(t,i,e)},e._dragPointerMove=function(t,i){var e={x:i.pageX-this.pointerDownPointer.pageX,y:i.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(e)&&this._dragStart(t,i),e},e.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},e.pointerUp=function(t,i){this.emitEvent("pointerUp",[t,i]),this._dragPointerUp(t,i)},e._dragPointerUp=function(t,i){this.isDragging?this._dragEnd(t,i):this._staticClick(t,i)},e._dragStart=function(t,i){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,i)},e.dragStart=function(t,i){this.emitEvent("dragStart",[t,i])},e._dragMove=function(t,i,e){this.isDragging&&this.dragMove(t,i,e)},e.dragMove=function(t,i,e){t.preventDefault(),this.emitEvent("dragMove",[t,i,e])},e._dragEnd=function(t,i){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,i)},e.dragEnd=function(t,i){this.emitEvent("dragEnd",[t,i])},e.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},e._staticClick=function(t,i){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,i),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},e.staticClick=function(t,i){this.emitEvent("staticClick",[t,i])},i.getPointerPoint=t.getPointerPoint,i}),function(e,n){"function"==typeof define&&define.amd?define(["get-size/get-size","unidragger/unidragger"],function(t,i){return n(e,t,i)}):"object"==typeof module&&module.exports?module.exports=n(e,require("get-size"),require("unidragger")):e.Draggabilly=n(e,e.getSize,e.Unidragger)}(window,function(r,a,t){function e(t,i){for(var e in i)t[e]=i[e];return t}var n=r.jQuery;function i(t,i){this.element="string"==typeof t?document.querySelector(t):t,n&&(this.$element=n(this.element)),this.options=e({},this.constructor.defaults),this.option(i),this._create()}var o=i.prototype=Object.create(t.prototype);i.defaults={},o.option=function(t){e(this.options,t)};var s={relative:!0,absolute:!0,fixed:!0};function d(t,i,e){return e=e||"round",i?Math[e](t/i)*i:t}return o._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=e({},this.position);var t=getComputedStyle(this.element);s[t.position]||(this.element.style.position="relative"),this.on("pointerDown",this.onPointerDown),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},o.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},o.dispatchEvent=function(t,i,e){var n=[i].concat(e);this.emitEvent(t,n),this.dispatchJQueryEvent(t,i,e)},o.dispatchJQueryEvent=function(t,i,e){var n=r.jQuery;if(n&&this.$element){var o=n.Event(i);o.type=t,this.$element.trigger(o,e)}},o._getPosition=function(){var t=getComputedStyle(this.element),i=this._getPositionCoord(t.left,"width"),e=this._getPositionCoord(t.top,"height");this.position.x=isNaN(i)?0:i,this.position.y=isNaN(e)?0:e,this._addTransformPosition(t)},o._getPositionCoord=function(t,i){if(-1!=t.indexOf("%")){var e=a(this.element.parentNode);return e?parseFloat(t)/100*e[i]:0}return parseInt(t,10)},o._addTransformPosition=function(t){var i=t.transform;if(0===i.indexOf("matrix")){var e=i.split(","),n=0===i.indexOf("matrix3d")?12:4,o=parseInt(e[n],10),r=parseInt(e[n+1],10);this.position.x+=o,this.position.y+=r}},o.onPointerDown=function(t,i){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",t,[i])},o.dragStart=function(t,i){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[i]),this.animate())},o.measureContainment=function(){var t=this.getContainer();if(t){var i=a(this.element),e=a(t),n=this.element.getBoundingClientRect(),o=t.getBoundingClientRect(),r=e.borderLeftWidth+e.borderRightWidth,s=e.borderTopWidth+e.borderBottomWidth,h=this.relativeStartPosition={x:n.left-(o.left+e.borderLeftWidth),y:n.top-(o.top+e.borderTopWidth)};this.containSize={width:e.width-r-h.x-i.width,height:e.height-s-h.y-i.height}}},o.getContainer=function(){var t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},o.onPointerMove=function(t,i,e){this.dispatchJQueryEvent("pointerMove",t,[i,e])},o.dragMove=function(t,i,e){if(this.isEnabled){var n=e.x,o=e.y,r=this.options.grid,s=r&&r[0],h=r&&r[1];n=d(n,s),o=d(o,h),n=this.containDrag("x",n,s),o=this.containDrag("y",o,h),n="y"==this.options.axis?0:n,o="x"==this.options.axis?0:o,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+o,this.dragPoint.x=n,this.dragPoint.y=o,this.dispatchEvent("dragMove",t,[i,e])}},o.containDrag=function(t,i,e){if(!this.options.containment)return i;var n="x"==t?"width":"height",o=d(-this.relativeStartPosition[t],e,"ceil"),r=this.containSize[n];return r=d(r,e,"floor"),Math.max(o,Math.min(r,i))},o.onPointerUp=function(t,i){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",t,[i])},o.dragEnd=function(t,i){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[i]))},o.animate=function(){if(this.isDragging){this.positionDrag();var t=this;requestAnimationFrame(function(){t.animate()})}},o.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},o.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},o.staticClick=function(t,i){this.dispatchEvent("staticClick",t,[i])},o.setPosition=function(t,i){this.position.x=t,this.position.y=i,this.setLeftTop()},o.enable=function(){this.isEnabled=!0},o.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},o.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},o._init=function(){},n&&n.bridget&&n.bridget("draggabilly",i),i});

/* sanitize.min.js , function html_clean(input) */
var tagWhitelist_=["A","B","BODY","BR","DIV","EM","HR","I","IMG","P","SPAN","STRONG","IFRAME","VIDEO"];
var attributeWhitelist_=["href","width","height","frameborder","src","allowfullscreen","style"];
var allowedUrls={
  IFRAME:[/https?:\/\/www.dailymotion.com\//,/(https?:)?\/\/www.youtube.com\//],
  VIDEO:[/https?:\/\/www.youtube.com\//]
};
function isUrlAllowed(a,b,c){function d(a){return function(b){return b.test(a)}}return"src"!=b||(!(a in allowedUrls)||allowedUrls[a].some(d(c)))}function html_clean(a){function c(a){if(a.nodeType==Node.TEXT_NODE)var d=a.cloneNode(!0);else if(a.nodeType==Node.ELEMENT_NODE&&tagWhitelist_.indexOf(a.tagName)>-1){d=b.contentDocument.createElement(a.tagName);for(var e=0;e<a.attributes.length;e++){var f=a.attributes[e];attributeWhitelist_.indexOf(f.name)>-1&&isUrlAllowed(a.tagName,f.name,f.value)&&d.setAttribute(f.name,f.value)}for(e=0;e<a.childNodes.length;e++){var g=c(a.childNodes[e]);d.appendChild(g)}}else d=document.createDocumentFragment();return d}var b=document.createElement("iframe");if(void 0===b.sandbox)return alert("Your browser does not support sandboxed iframes. Please upgrade to a modern browser."),"";b.sandbox="allow-same-origin",b.style.display="none",document.body.appendChild(b),b.contentDocument.body.innerHTML=a;var d=c(b.contentDocument.body);return document.body.removeChild(b),"undefined"!=d.innerHTML?d.innerHTML:""}

/* md5.min.js */
!function(n){"use strict";function t(n,t){var r=(65535&n)+(65535&t),e=(n>>16)+(t>>16)+(r>>16);return e<<16|65535&r}function r(n,t){return n<<t|n>>>32-t}function e(n,e,o,u,c,f){return t(r(t(t(e,n),t(u,f)),c),o)}function o(n,t,r,o,u,c,f){return e(t&r|~t&o,n,t,u,c,f)}function u(n,t,r,o,u,c,f){return e(t&o|r&~o,n,t,u,c,f)}function c(n,t,r,o,u,c,f){return e(t^r^o,n,t,u,c,f)}function f(n,t,r,o,u,c,f){return e(r^(t|~o),n,t,u,c,f)}function i(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;var e,i,a,h,d,l=1732584193,g=-271733879,v=-1732584194,m=271733878;for(e=0;e<n.length;e+=16)i=l,a=g,h=v,d=m,l=o(l,g,v,m,n[e],7,-680876936),m=o(m,l,g,v,n[e+1],12,-389564586),v=o(v,m,l,g,n[e+2],17,606105819),g=o(g,v,m,l,n[e+3],22,-1044525330),l=o(l,g,v,m,n[e+4],7,-176418897),m=o(m,l,g,v,n[e+5],12,1200080426),v=o(v,m,l,g,n[e+6],17,-1473231341),g=o(g,v,m,l,n[e+7],22,-45705983),l=o(l,g,v,m,n[e+8],7,1770035416),m=o(m,l,g,v,n[e+9],12,-1958414417),v=o(v,m,l,g,n[e+10],17,-42063),g=o(g,v,m,l,n[e+11],22,-1990404162),l=o(l,g,v,m,n[e+12],7,1804603682),m=o(m,l,g,v,n[e+13],12,-40341101),v=o(v,m,l,g,n[e+14],17,-1502002290),g=o(g,v,m,l,n[e+15],22,1236535329),l=u(l,g,v,m,n[e+1],5,-165796510),m=u(m,l,g,v,n[e+6],9,-1069501632),v=u(v,m,l,g,n[e+11],14,643717713),g=u(g,v,m,l,n[e],20,-373897302),l=u(l,g,v,m,n[e+5],5,-701558691),m=u(m,l,g,v,n[e+10],9,38016083),v=u(v,m,l,g,n[e+15],14,-660478335),g=u(g,v,m,l,n[e+4],20,-405537848),l=u(l,g,v,m,n[e+9],5,568446438),m=u(m,l,g,v,n[e+14],9,-1019803690),v=u(v,m,l,g,n[e+3],14,-187363961),g=u(g,v,m,l,n[e+8],20,1163531501),l=u(l,g,v,m,n[e+13],5,-1444681467),m=u(m,l,g,v,n[e+2],9,-51403784),v=u(v,m,l,g,n[e+7],14,1735328473),g=u(g,v,m,l,n[e+12],20,-1926607734),l=c(l,g,v,m,n[e+5],4,-378558),m=c(m,l,g,v,n[e+8],11,-2022574463),v=c(v,m,l,g,n[e+11],16,1839030562),g=c(g,v,m,l,n[e+14],23,-35309556),l=c(l,g,v,m,n[e+1],4,-1530992060),m=c(m,l,g,v,n[e+4],11,1272893353),v=c(v,m,l,g,n[e+7],16,-155497632),g=c(g,v,m,l,n[e+10],23,-1094730640),l=c(l,g,v,m,n[e+13],4,681279174),m=c(m,l,g,v,n[e],11,-358537222),v=c(v,m,l,g,n[e+3],16,-722521979),g=c(g,v,m,l,n[e+6],23,76029189),l=c(l,g,v,m,n[e+9],4,-640364487),m=c(m,l,g,v,n[e+12],11,-421815835),v=c(v,m,l,g,n[e+15],16,530742520),g=c(g,v,m,l,n[e+2],23,-995338651),l=f(l,g,v,m,n[e],6,-198630844),m=f(m,l,g,v,n[e+7],10,1126891415),v=f(v,m,l,g,n[e+14],15,-1416354905),g=f(g,v,m,l,n[e+5],21,-57434055),l=f(l,g,v,m,n[e+12],6,1700485571),m=f(m,l,g,v,n[e+3],10,-1894986606),v=f(v,m,l,g,n[e+10],15,-1051523),g=f(g,v,m,l,n[e+1],21,-2054922799),l=f(l,g,v,m,n[e+8],6,1873313359),m=f(m,l,g,v,n[e+15],10,-30611744),v=f(v,m,l,g,n[e+6],15,-1560198380),g=f(g,v,m,l,n[e+13],21,1309151649),l=f(l,g,v,m,n[e+4],6,-145523070),m=f(m,l,g,v,n[e+11],10,-1120210379),v=f(v,m,l,g,n[e+2],15,718787259),g=f(g,v,m,l,n[e+9],21,-343485551),l=t(l,i),g=t(g,a),v=t(v,h),m=t(m,d);return[l,g,v,m]}function a(n){var t,r="",e=32*n.length;for(t=0;t<e;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var e=8*n.length;for(t=0;t<e;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function d(n){return a(i(h(n),8*n.length))}function l(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}function g(n){var t,r,e="0123456789abcdef",o="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}function v(n){return unescape(encodeURIComponent(n))}function m(n){return d(v(n))}function p(n){return g(m(n))}function s(n,t){return l(v(n),v(t))}function C(n,t){return g(s(n,t))}function A(n,t,r){return t?r?s(t,n):C(t,n):r?m(n):p(n)}"function"==typeof define&&define.amd?define(function(){return A}):"object"==typeof module&&module.exports?module.exports=A:n.md5=A}(this);

//=== Clipboard ===============================
window.addEventListener("paste", pasteHandler); //chrome
//handler
function pasteHandler(e){
	if(e.clipboardData == false) return false; //empty
    var items = e.clipboardData.items;
    if(items == undefined) return false;
    for (var i = 0; i < items.length; i++) {
        if (items[i].type.indexOf("image") == -1) continue; //not image
        var blob = items[i].getAsFile();
        var URLObj = window.URL || window.webkitURL;
        var source = URLObj.createObjectURL(blob);
        paste_createImage(source);
        }
	}
//draw pasted object
function paste_createImage(source){
  var canvas = document.getElementById("cc");
  var ctx = canvas.getContext("2d");
  var pastedImage = new Image();
	pastedImage.onload = function(){
        ctx.drawImage(pastedImage, 0, 0);
		}
	pastedImage.src = source;
	}

//=== /Clipboard ===============================

/* mithril.min.js v2.0.0-rc.6*/
!function(){"use strict";function e(e,t,n,r,o,i){return{tag:e,key:t,attrs:n,children:r,text:o,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}e.normalize=function(t){return Array.isArray(t)?e("[",void 0,void 0,e.normalizeChildren(t),void 0,void 0):null!=t&&"object"!=typeof t?e("#",void 0,void 0,!1===t?"":t,void 0,void 0):t},e.normalizeChildren=function(t){for(var n=[],r=0;r<t.length;r++)n[r]=e.normalize(t[r]);return n};var t=function(){var t,n=arguments[this],r=this+1;if(null==n?n={}:("object"!=typeof n||null!=n.tag||Array.isArray(n))&&(n={},r=this),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);return e("",n.key,n,t)},n=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,r={},o={}.hasOwnProperty;function i(e){for(var t in e)if(o.call(e,t))return!1;return!0}function l(l){if(null==l||"string"!=typeof l&&"function"!=typeof l&&"function"!=typeof l.view)throw Error("The selector must be either a string or a component.");var a=t.apply(1,arguments);return"string"==typeof l&&(a.children=e.normalizeChildren(a.children),"["!==l)?function(t,n){var r=n.attrs,l=e.normalizeChildren(n.children),a=o.call(r,"class"),u=a?r.class:r.className;if(n.tag=t.tag,n.attrs=null,n.children=void 0,!i(t.attrs)&&!i(r)){var s={};for(var f in r)o.call(r,f)&&(s[f]=r[f]);r=s}for(var f in t.attrs)o.call(t.attrs,f)&&"className"!==f&&!o.call(r,f)&&(r[f]=t.attrs[f]);for(var f in null==u&&null==t.attrs.className||(r.className=null!=u?null!=t.attrs.className?String(t.attrs.className)+" "+String(u):u:null!=t.attrs.className?t.attrs.className:null),a&&(r.class=null),r)if(o.call(r,f)&&"key"!==f){n.attrs=r;break}return Array.isArray(l)&&1===l.length&&null!=l[0]&&"#"===l[0].tag?n.text=l[0].children:n.children=l,n}(r[l]||function(e){for(var t,o="div",i=[],l={};t=n.exec(e);){var a=t[1],u=t[2];if(""===a&&""!==u)o=u;else if("#"===a)l.id=u;else if("."===a)i.push(u);else if("["===t[3][0]){var s=t[6];s&&(s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?i.push(s):l[t[4]]=""===s?s:s||!0}}return i.length>0&&(l.className=i.join(" ")),r[e]={tag:o,attrs:l}}(l),a):(a.tag=l,a)}l.trust=function(t){return null==t&&(t=""),e("<",void 0,void 0,t,void 0,void 0)},l.fragment=function(){var n=t.apply(0,arguments);return n.tag="[",n.children=e.normalizeChildren(n.children),n};var a=function(){return l.apply(this,arguments)};if(a.m=l,a.trust=l.trust,a.fragment=l.fragment,(u=function(e){if(!(this instanceof u))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var t=this,n=[],r=[],o=s(n,!0),i=s(r,!1),l=t._instance={resolvers:n,rejectors:r},a="function"==typeof setImmediate?setImmediate:setTimeout;function s(e,o){return function u(s){var c;try{if(!o||null==s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof(c=s.then))a(function(){o||0!==e.length||console.error("Possible unhandled promise rejection:",s);for(var t=0;t<e.length;t++)e[t](s);n.length=0,r.length=0,l.state=o,l.retry=function(){u(s)}});else{if(s===t)throw new TypeError("Promise can't be resolved w/ itself");f(c.bind(s))}}catch(e){i(e)}}}function f(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(i);try{e(n(o),r)}catch(e){r(e)}}f(e)}).prototype.then=function(e,t){var n,r,o=this._instance;function i(e,t,i,l){t.push(function(t){if("function"!=typeof e)i(t);else try{n(e(t))}catch(e){r&&r(e)}}),"function"==typeof o.retry&&l===o.state&&o.retry()}var l=new u(function(e,t){n=e,r=t});return i(e,o.resolvers,n,!0),i(t,o.rejectors,r,!1),l},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.finally=function(e){return this.then(function(t){return u.resolve(e()).then(function(){return t})},function(t){return u.resolve(e()).then(function(){return u.reject(t)})})},u.resolve=function(e){return e instanceof u?e:new u(function(t){t(e)})},u.reject=function(e){return new u(function(t,n){n(e)})},u.all=function(e){return new u(function(t,n){var r=e.length,o=0,i=[];if(0===e.length)t([]);else for(var l=0;l<e.length;l++)!function(l){function a(e){o++,i[l]=e,o===r&&t(i)}null==e[l]||"object"!=typeof e[l]&&"function"!=typeof e[l]||"function"!=typeof e[l].then?a(e[l]):e[l].then(a,n)}(l)})},u.race=function(e){return new u(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},"undefined"!=typeof window){void 0===window.Promise?window.Promise=u:window.Promise.prototype.finally||(window.Promise.prototype.finally=u.prototype.finally);var u=window.Promise}else if("undefined"!=typeof global){void 0===global.Promise?global.Promise=u:global.Promise.prototype.finally||(global.Promise.prototype.finally=u.prototype.finally);u=global.Promise}var s=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var o=0;o<n.length;o++)r(e+"["+o+"]",n[o]);else if("[object Object]"===Object.prototype.toString.call(n))for(var o in n)r(e+"["+o+"]",n[o]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}},f=Object.assign||function(e,t){Object.keys(t).forEach(function(n){e[n]=t[n]})},c=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names *must* be separated");if(null==t)return e;var n=e.indexOf("?"),r=e.indexOf("#"),o=r<0?e.length:r,i=n<0?o:n,l=e.slice(0,i),a={};f(a,t);var u=l.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,n,r){return delete a[n],null==t[n]?e:r?t[n]:encodeURIComponent(String(t[n]))}),c=u.indexOf("?"),d=u.indexOf("#"),h=d<0?u.length:d,p=c<0?h:c,v=u.slice(0,p);n>=0&&(v+="?"+e.slice(n,o)),c>=0&&(v+=(n<0?"?":"&")+u.slice(c,h));var m=s(a);return m&&(v+=(n<0&&c<0?"?":"&")+m),r>=0&&(v+=e.slice(r)),d>=0&&(v+=(r<0?"":"&")+u.slice(d)),v},d=function(e,t){var n,r=0;function o(e){return function(r,o){"string"!=typeof r?(o=r,r=r.url):null==o&&(o={});var i=new t(function(t,n){e(c(r,o.params),o,function(e){if("function"==typeof o.type)if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new o.type(e[n]);else e=new o.type(e);t(e)},n)});if(!0===o.background)return i;var l=0;function a(){0==--l&&"function"==typeof n&&n()}return function e(t){var n=t.then;return t.then=function(){l++;var r=n.apply(t,arguments);return r.then(a,function(e){if(a(),0===l)throw e}),e(r)},t}(i)}}function i(e,t){for(var n in e.headers)if({}.hasOwnProperty.call(e.headers,n)&&t.test(n))return!0;return!1}return{request:o(function(t,n,r,o){var l=null!=n.method?n.method.toUpperCase():"GET",a=n.body,u=!(null!=n.serialize&&n.serialize!==JSON.serialize||a instanceof e.FormData),s=new e.XMLHttpRequest,f=!1,c=s.abort;for(var d in s.abort=function(){f=!0,c.call(s)},s.open(l,t,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),u&&null!=a&&!i(n,/^content-type0$/i)&&s.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||i(n,/^accept$/i)||s.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(s.withCredentials=n.withCredentials),n.timeout&&(s.timeout=n.timeout),s.responseType=n.responseType||("function"==typeof n.extract?"":"json"),n.headers)({}).hasOwnProperty.call(n.headers,d)&&s.setRequestHeader(d,n.headers[d]);"function"==typeof n.config&&(s=n.config(s,n)||s),s.onreadystatechange=function(){if(!f&&4===s.readyState)try{var e,i=s.status>=200&&s.status<300||304===s.status||/^file:\/\//i.test(t),l=s.response;if(null==l)try{l=s.responseText,"function"!=typeof n.extract&&"json"===s.responseType&&(l=JSON.parse(l))}catch(e){l=null}if("function"==typeof n.extract?(l=n.extract(s,n),i=!0):"function"==typeof n.deserialize&&(l=n.deserialize(l)),i)r(l);else{try{e=s.responseText}catch(t){e=l}var a=new Error(e);a.code=s.status,a.response=l,o(a)}}catch(e){o(e)}},null==a?s.send():"function"==typeof n.serialize?s.send(n.serialize(a)):a instanceof e.FormData?s.send(a):s.send(JSON.stringify(a))}),jsonp:o(function(t,n,o,i){var l=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+r++,a=e.document.createElement("script");e[l]=function(t){delete e[l],a.parentNode.removeChild(a),o(t)},a.onerror=function(){delete e[l],a.parentNode.removeChild(a),i(new Error("JSONP request failed"))},a.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(l),e.document.documentElement.appendChild(a)}),setCompletionCallback:function(e){n=e}}}(window,u),h=function(t){var n,r=t.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function l(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function a(e){var t=e.state;try{return this.apply(t,arguments)}finally{l(e,t)}}function u(){try{return r.activeElement}catch(e){return null}}function s(e,t,n,r,o,i,l){for(var a=n;a<r;a++){var u=t[a];null!=u&&f(e,u,o,l,i)}}function f(t,n,o,l,u){var c=n.tag;if("string"==typeof c)switch(n.state={},null!=n.attrs&&$(n.attrs,n,o),c){case"#":!function(e,t,n){t.dom=r.createTextNode(t.children),g(e,t.dom,n)}(t,n,u);break;case"<":d(t,n,l,u);break;case"[":!function(e,t,n,o,i){var l=r.createDocumentFragment();if(null!=t.children){var a=t.children;s(l,a,0,a.length,n,null,o)}t.dom=l.firstChild,t.domSize=l.childNodes.length,g(e,l,i)}(t,n,o,l,u);break;default:!function(t,n,o,l,a){var u=n.tag,f=n.attrs,c=f&&f.is,d=(l=i(n)||l)?c?r.createElementNS(l,u,{is:c}):r.createElementNS(l,u):c?r.createElement(u,{is:c}):r.createElement(u);n.dom=d,null!=f&&function(e,t,n){for(var r in t)k(e,r,null,t[r],n)}(n,f,l);if(g(t,d,a),null!=f&&null!=f.contenteditable)w(n);else if(null!=n.text&&(""!==n.text?d.textContent=n.text:n.children=[e("#",void 0,void 0,n.text,void 0,void 0)]),null!=n.children){var h=n.children;s(d,h,0,h.length,o,null,l),"select"===n.tag&&null!=f&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&k(e,"selectedIndex",null,t.selectedIndex,void 0)}(n,f)}}(t,n,o,l,u)}else!function(t,n,r,o,i){(function(t,n){var r;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(r=t.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(r=t.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if($(t.state,t,n),null!=t.attrs&&$(t.attrs,t,n),t.instance=e.normalize(a.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null})(n,r),null!=n.instance?(f(t,n.instance,r,o,i),n.dom=n.instance.dom,n.domSize=null!=n.dom?n.instance.domSize:0):n.domSize=0}(t,n,o,l,u)}var c={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function d(e,t,n,o){var i=t.children.match(/^\s*?<(\w+)/im)||[],l=r.createElement(c[i[1]]||"div");"http://www.w3.org/2000/svg"===n?(l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",l=l.firstChild):l.innerHTML=t.children,t.dom=l.firstChild,t.domSize=l.childNodes.length;for(var a,u=r.createDocumentFragment();a=l.firstChild;)u.appendChild(a);g(e,u,o)}function h(e,t,n,r,o,i){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)s(e,n,0,n.length,r,o,i);else if(null==n||0===n.length)b(t,0,t.length);else{for(var l=0,a=0,u=null,c=null;a<t.length;a++)if(null!=t[a]){u=null!=t[a].key;break}for(;l<n.length;l++)if(null!=n[l]){c=null!=n[l].key;break}if(null===c&&null==u)return;if(u!==c)b(t,a,t.length),s(e,n,l,n.length,r,o,i);else if(c){for(var d,h,w,k,S,C=t.length-1,E=n.length-1;C>=a&&E>=l;)if(w=t[C],k=n[E],null==w)C--;else if(null==k)E--;else{if(w.key!==k.key)break;w!==k&&p(e,w,k,r,o,i),null!=k.dom&&(o=k.dom),C--,E--}for(;C>=a&&E>=l;)if(d=t[a],h=n[l],null==d)a++;else if(null==h)l++;else{if(d.key!==h.key)break;a++,l++,d!==h&&p(e,d,h,r,y(t,a,o),i)}for(;C>=a&&E>=l;){if(null==d)a++;else if(null==h)l++;else if(null==w)C--;else if(null==k)E--;else{if(l===E)break;if(d.key!==k.key||w.key!==h.key)break;S=y(t,a,o),g(e,m(w),S),w!==h&&p(e,w,h,r,S,i),++l<=--E&&g(e,m(d),o),d!==k&&p(e,d,k,r,o,i),null!=k.dom&&(o=k.dom),a++,C--}w=t[C],k=n[E],d=t[a],h=n[l]}for(;C>=a&&E>=l;){if(null==w)C--;else if(null==k)E--;else{if(w.key!==k.key)break;w!==k&&p(e,w,k,r,o,i),null!=k.dom&&(o=k.dom),C--,E--}w=t[C],k=n[E]}if(l>E)b(t,a,C+1);else if(a>C)s(e,n,l,E+1,r,o,i);else{var j,z,A=o,O=E-l+1,N=new Array(O),P=0,$=0,I=2147483647,R=0;for($=0;$<O;$++)N[$]=-1;for($=E;$>=l;$--)if(null==j&&(j=v(t,a,C+1)),null!=(k=n[$])){var T=j[k.key];null!=T&&(I=T<I?T:-1,N[$-l]=T,w=t[T],t[T]=null,w!==k&&p(e,w,k,r,o,i),null!=k.dom&&(o=k.dom),R++)}if(o=A,R!==C-a+1&&b(t,a,C+1),0===R)s(e,n,l,E+1,r,o,i);else if(-1===I)for(P=(z=function(e){var t,n,r=e.slice(),o=[];o.push(0);for(var i=0,l=e.length;i<l;++i)if(-1!==e[i]){var a=o[o.length-1];if(e[a]<e[i])r[i]=a,o.push(i);else{for(t=0,n=o.length-1;t<n;){var u=(t+n)/2|0;e[o[u]]<e[i]?t=u+1:n=u}e[i]<e[o[t]]&&(t>0&&(r[i]=o[t-1]),o[t]=i)}}t=o.length,n=o[t-1];for(;t-- >0;)o[t]=n,n=r[n];return o}(N)).length-1,$=E;$>=l;$--)h=n[$],-1===N[$-l]?f(e,h,r,i,o):z[P]===$-l?P--:g(e,m(h),o),null!=h.dom&&(o=n[$].dom);else for($=E;$>=l;$--)h=n[$],-1===N[$-l]&&f(e,h,r,i,o),null!=h.dom&&(o=n[$].dom)}}else{var L=t.length<n.length?t.length:n.length;for(l=l<a?l:a;l<L;l++)(d=t[l])===(h=n[l])||null==d&&null==h||(null==d?f(e,h,r,i,y(t,l+1,o)):null==h?x(d):p(e,d,h,r,y(t,l+1,o),i));t.length>L&&b(t,l,t.length),n.length>L&&s(e,n,l,n.length,r,o,i)}}}function p(t,n,r,o,l,u){var s=n.tag;if(s===r.tag){if(r.state=n.state,r.events=n.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=a.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=a.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0}(r,n))return;if("string"==typeof s)switch(null!=r.attrs&&I(r.attrs,r,o),s){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(n,r);break;case"<":!function(e,t,n,r,o){t.children!==n.children?(m(t),d(e,n,r,o)):(n.dom=t.dom,n.domSize=t.domSize)}(t,n,r,u,l);break;case"[":!function(e,t,n,r,o,i){h(e,t.children,n.children,r,o,i);var l=0,a=n.children;if(n.dom=null,null!=a){for(var u=0;u<a.length;u++){var s=a[u];null!=s&&null!=s.dom&&(null==n.dom&&(n.dom=s.dom),l+=s.domSize||1)}1!==l&&(n.domSize=l)}}(t,n,r,o,l,u);break;default:!function(t,n,r,o){var l=n.dom=t.dom;o=i(n)||o,"textarea"===n.tag&&(null==n.attrs&&(n.attrs={}),null!=n.text&&(n.attrs.value=n.text,n.text=void 0));(function(e,t,n,r){if(null!=n)for(var o in n)k(e,o,t&&t[o],n[o],r);var i;if(null!=t)for(var o in t)null==(i=t[o])||null!=n&&null!=n[o]||S(e,o,i,r)})(n,t.attrs,n.attrs,o),null!=n.attrs&&null!=n.attrs.contenteditable?w(n):null!=t.text&&null!=n.text&&""!==n.text?t.text.toString()!==n.text.toString()&&(t.dom.firstChild.nodeValue=n.text):(null!=t.text&&(t.children=[e("#",void 0,void 0,t.text,void 0,t.dom.firstChild)]),null!=n.text&&(n.children=[e("#",void 0,void 0,n.text,void 0,void 0)]),h(l,t.children,n.children,r,null,o))}(n,r,o,u)}else!function(t,n,r,o,i,l){if(r.instance=e.normalize(a.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");I(r.state,r,o),null!=r.attrs&&I(r.attrs,r,o);null!=r.instance?(null==n.instance?f(t,r.instance,o,l,i):p(t,n.instance,r.instance,o,i,l),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=n.instance?(x(n.instance),r.dom=void 0,r.domSize=0):(r.dom=n.dom,r.domSize=n.domSize)}(t,n,r,o,l,u)}else x(n),f(t,r,o,u,l)}function v(e,t,n){for(var r=Object.create(null);t<n;t++){var o=e[t];if(null!=o){var i=o.key;null!=i&&(r[i]=t)}}return r}function m(e){var t=e.domSize;if(null!=t||null==e.dom){var n=r.createDocumentFragment();if(t>0){for(var o=e.dom;--t;)n.appendChild(o.nextSibling);n.insertBefore(o,n.firstChild)}return n}return e.dom}function y(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function g(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function w(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function b(e,t,n){for(var r=t;r<n;r++){var o=e[r];null!=o&&x(o)}}function x(e){var t,n=1,r=0,o=e.state;"string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove&&(null!=(t=a.call(e.state.onbeforeremove,e))&&"function"==typeof t.then&&(n++,t.then(i,i)));e.attrs&&"function"==typeof e.attrs.onbeforeremove&&(null!=(t=a.call(e.attrs.onbeforeremove,e))&&"function"==typeof t.then&&(n++,t.then(i,i)));function i(){if(++r===n&&(l(e,o),function e(t){"string"!=typeof t.tag&&"function"==typeof t.state.onremove&&a.call(t.state.onremove,t);t.attrs&&"function"==typeof t.attrs.onremove&&a.call(t.attrs.onremove,t);if("string"!=typeof t.tag)null!=t.instance&&e(t.instance);else{var n=t.children;if(Array.isArray(n))for(var r=0;r<n.length;r++){var o=n[r];null!=o&&e(o)}}}(e),e.dom)){for(var t=e.dom.parentNode,i=e.domSize||1;--i;)t.removeChild(e.dom.nextSibling);t.removeChild(e.dom)}}i()}function k(e,t,n,o,i){if("key"!==t&&"is"!==t&&null!=o&&!C(t)&&(n!==o||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===u()||"option"===e.tag&&e.dom.parentNode===r.activeElement}(e,t)||"object"==typeof o)){if("o"===t[0]&&"n"===t[1])return P(e,t,o);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),o);else if("style"===t)O(e.dom,n,o);else if(E(e,t,i)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+o&&e.dom===u())return;if("select"===e.tag&&null!==n&&e.dom.value===""+o)return;if("option"===e.tag&&null!==n&&e.dom.value===""+o)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,o):e.dom[t]=o}else"boolean"==typeof o?o?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,o)}}function S(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!C(t))if("o"!==t[0]||"n"!==t[1]||C(t))if("style"===t)O(e.dom,n,null);else if(!E(e,t,r)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===u())||"input"===e.tag&&"type"===t){var o=t.indexOf(":");-1!==o&&(t=t.slice(o+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else P(e,t,void 0)}function C(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function E(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var j=/[A-Z]/g;function z(e){return"-"+e.toLowerCase()}function A(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(j,z)}function O(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)for(var r in e.style.cssText="",n){null!=(o=n[r])&&e.style.setProperty(A(r),String(o))}else{for(var r in n){var o;null!=(o=n[r])&&(o=String(o))!==String(t[r])&&e.style.setProperty(A(r),o)}for(var r in t)null!=t[r]&&null==n[r]&&e.style.removeProperty(A(r))}}function N(){}function P(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new N,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function $(e,t,n){"function"==typeof e.oninit&&a.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(a.bind(e.oncreate,t))}function I(e,t,n){"function"==typeof e.onupdate&&n.push(a.bind(e.onupdate,t))}return N.prototype=Object.create(null),N.prototype.handleEvent=function(e){var t,r=this["on"+e.type];"function"==typeof r?t=r.call(e.currentTarget,e):"function"==typeof r.handleEvent&&r.handleEvent(e),!1===e.redraw?e.redraw=void 0:"function"==typeof n&&n(),!1===t&&(e.preventDefault(),e.stopPropagation())},{render:function(t,n){if(!t)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var r=[],o=u(),i=t.namespaceURI;null==t.vnodes&&(t.textContent=""),n=e.normalizeChildren(Array.isArray(n)?n:[n]),h(t,t.vnodes,n,r,null,"http://www.w3.org/1999/xhtml"===i?void 0:i),t.vnodes=n,null!=o&&u()!==o&&"function"==typeof o.focus&&o.focus();for(var l=0;l<r.length;l++)r[l]()},setRedraw:function(e){return n=e}}};var p=function(e,t){var n=h(e),r=[],o=!1;function i(e){var t=r.indexOf(e);t>-1&&r.splice(t,2)}function l(){if(o)throw new Error("Nested m.redraw.sync() call");o=!0;for(var e=1;e<r.length;e+=2)try{r[e]()}catch(e){"undefined"!=typeof console&&console.error(e)}o=!1}var a=(t||function(e){var t=null;return function(){null===t&&(t=requestAnimationFrame(function(){t=null,e()}))}})(l);return a.sync=l,n.setRedraw(a),{subscribe:function(e,t){i(e),r.push(e,t)},unsubscribe:i,redraw:a,render:n.render}}(window);d.setCompletionCallback(p.redraw);var v;a.mount=(v=p,function(t,n){if(null===n)return v.render(t,[]),void v.unsubscribe(t);if(null==n.view&&"function"!=typeof n)throw new Error("m.mount(element, component) expects a component, not a vnode");var r=function(){v.render(t,e(n))};v.subscribe(t,r),r()});var m=u,y=function(e,t){if(null==t&&(t={}),""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var n=e.split("&"),r={},o=0;o<n.length;o++){var i=n[o].split("="),l=decodeURIComponent(i[0]),a=2===i.length?decodeURIComponent(i[1]):"";"true"===a?a=!0:"false"===a&&(a=!1);var u=l.split(/\]\[?|\[/),s=t;l.indexOf("[")>-1&&u.pop();for(var f=0;f<u.length;f++){var c=u[f],d=u[f+1],h=""==d||!isNaN(parseInt(d,10)),p=f===u.length-1;if(""===c)null==r[l=u.slice(0,f).join()]&&(r[l]=Array.isArray(s)?s.length:0),c=r[l]++;p?s[c]=a:null==s[c]&&(s[c]=h?[]:{}),s=s[c]}}return t},g=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),r=n<0?e.length:n,o=t<0?r:t,i=e.slice(0,o).replace(/\/{2,}/g,"/"),l={};return i?("/"!==i[0]&&(i="/"+i),i.length>1&&"/"===i[i.length-1]&&(i=i.slice(0,-1))):i="/",t>=0&&y(e.slice(t+1,r),l),n>=0&&y(e.slice(n+1),l),{path:i,params:l}};a.route=function(t,n){var r,o,i,l,a,u=function(e){var t,n="function"==typeof e.history.pushState,r="function"==typeof setImmediate?setImmediate:setTimeout;function o(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}var i={prefix:"#!",getPath:function(){return"#"===i.prefix.charAt(0)?o("hash").slice(i.prefix.length):"?"===i.prefix.charAt(0)?o("search").slice(i.prefix.length)+o("hash"):o("pathname").slice(i.prefix.length)+o("search")+o("hash")},setPath:function(t,r,o){if(t=c(t,r),n){var l=o?o.state:null,a=o?o.title:null;e.onpopstate(),o&&o.replace?e.history.replaceState(l,a,i.prefix+t):e.history.pushState(l,a,i.prefix+t)}else e.location.href=i.prefix+t},defineRoutes:function(o,l,a,u){var s=Object.keys(o).map(function(e){if("/"!==e.charAt(0))throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:e,component:o[e],check:(t=e,n=g(t),r=Object.keys(n.params),i=[],l=new RegExp("^"+n.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(i.push({k:t,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))})+"$"),function(e){for(var t=0;t<r.length;t++)if(n.params[r[t]]!==e.params[r[t]])return!1;if(!i.length)return l.test(e.path);var o=l.exec(e.path);if(null==o)return!1;for(t=0;t<i.length;t++)e.params[i[t].k]=i[t].r?o[t+1]:decodeURIComponent(o[t+1]);return!0})};var t,n,r,i,l});if(null!=u){var c=g(u);if(!s.some(function(e){return e.check(c)}))throw new ReferenceError("Default route doesn't match any known routes")}function d(){var t=i.getPath(),n=g(t);f(n.params,e.history.state);for(var r=0;r<s.length;r++)if(s[r].check(n))return void l(s[r].component,n.params,t,s[r].route);a(t,n.params)}n?e.onpopstate=function(){t||(t=r(function(){t=null,d()}))}:"#"===i.prefix.charAt(0)&&(e.onhashchange=d),d()}};return i}(t),s=function(t,s,f){if(null==t)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");function c(){null!=r&&n.render(t,r(e(o,i.key,i)))}var d=function(){c(),d=n.redraw};n.subscribe(t,c);var h=function(e){if(e===s)throw new Error("Could not resolve default route "+s);u.setPath(s,null,{replace:!0})};u.defineRoutes(f,function(e,t,n,u){var s=a=function(e,u){s===a&&(o=null==u||"function"!=typeof u.view&&"function"!=typeof u?"div":u,i=t,l=n,a=null,r=(e.render||function(e){return e}).bind(e),d())};e.view||"function"==typeof e?s({},e):e.onmatch?m.resolve(e.onmatch(t,n,u)).then(function(t){s(e,t)},function(){h(n)}):s(e,"div")},h,s)};s.set=function(e,t,n){null!=a&&((n=n||{}).replace=!0),a=null,u.setPath(e,t,n)},s.get=function(){return l},s.prefix=function(e){u.prefix=e};var d=function(e,t){t.dom.setAttribute("href",u.prefix+t.attrs.href),t.dom.onclick=function(t){if(!(t.ctrlKey||t.metaKey||t.shiftKey||2===t.which)){t.preventDefault(),t.redraw=!1;var n=this.getAttribute("href");0===n.indexOf(u.prefix)&&(n=n.slice(u.prefix.length)),s.set(n,void 0,e)}}};return s.link=function(e){return null==e.tag?d.bind(d,e):d({},e)},s.param=function(e){return void 0!==i&&void 0!==e?i[e]:i},s}(window,p);var w=h(window);a.render=w.render,a.redraw=p.redraw,a.request=d.request,a.jsonp=d.jsonp,a.parseQueryString=y,a.buildQueryString=s,a.parsePathname=g,a.buildPathname=c,a.version="2.0.0-rc.6",a.vnode=e,a.PromisePolyfill=u,"undefined"!=typeof module?module.exports=a:window.m=a}();

/**
* Sutton SignWriting JavaScript Library v2.2.0
* https://github.com/Slevinski/SuttonSignWriting
* Copyright (c) 2007-2018, Stephen E Slevinski Jr
* SuttonSignWriting.min.js is released under the MIT License.
*/
var ssw={re:{fsw:{sign:"(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]([0-9]{3}x[0-9]{3})(S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3})*",spatial:"S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}",symbol:"S[123][0-9a-f]{2}[0-5][0-9a-f]",coord:"[0-9]{3}x[0-9]{3}",sort:"A",box:"[BLMR]",query:"Q((A(S[123][0-9a-f]{2}[0-5u][0-9a-fu]|R[123][0-9a-f]{2}t[123][0-9a-f]{2})+)?T)?((R[123][0-9a-f]{2}t[123][0-9a-f]{2}([0-9]{3}x[0-9]{3})?)|(S[123][0-9a-f]{2}[0-5u][0-9a-fu]([0-9]{3}x[0-9]{3})?))*(V[0-9]+)?-?"},swu:{sign:"(\uD836\uDC00(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FB][\uDC00-\uDFFF])|(\uD8FC[\uDC00-\uDEA0])))+)?\uD836[\uDC01-\uDC04](\uD836[\uDC0C-\uDDFF]){2}(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FA][\uDC00-\uDFFF])|(\uD8FB[\uDC00-\uDFA0]))(\uD836[\uDC0C-\uDDFF]){2})*",spatial:"((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))(\uD836[\uDC0C-\uDDFF]){2}",symbol:"((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))",coord:"(\uD836[\uDC0C-\uDDFF]){2}",sort:"\uD836\uDC00",box:"\uD836[\uDC01-\uDC04]",query:"Q((A(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?|R((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?)+)?T)?((R((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?(\uD836[\uDC0C-\uDDFF]\uD836[\uDC0C-\uDDFF])?)|(((\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))f?r?(\uD836[\uDC0C-\uDDFF]\uD836[\uDC0C-\uDDFF])?))*(V[0-9]+)?-?"},style:"-C?(P[0-9]{2})?(G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_)?(D_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?_)?(Z([0-9]+(.[0-9]+)?|x))?(-(D[0-9]{2}_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)(,([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+))?_)*(Z[0-9]{2},[0-9]+(.[0-9]+)?(,[0-9]{3}x[0-9]{3})?)*)?(--?[_a-zA-Z][_a-zA-Z0-9-]{0,100}( -?[_a-zA-Z][_a-zA-Z0-9-]{0,100})*!([a-zA-Z][_a-zA-Z0-9-]{0,100}!)?)?"},encode:function(s){return s=s.replace(/[\u007F-\uFFFF]/g,function(s){return"\\u"+("0000"+s.charCodeAt(0).toString(16)).substr(-4).toUpperCase()})},decode:function(s){return s=s.replace(/\\u([0-9A-F]{4})/g,function(s,e){return String.fromCharCode(parseInt(e,16))})},pair:function(s){var e;"swu"==ssw.chars(s)&&(s=ssw.swu2hex(s));if(!s.match(new RegExp("[0-9A-F]{5}")))return!1;e=parseInt(s,16);var r=String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023));return!(!s||2!=r.length)&&[r.charCodeAt(0).toString(16).toUpperCase(),r.charCodeAt(1).toString(16).toUpperCase()]},chars:function(s){if(!s)return"";if(e="^[A-F0-9]{5}",s.match(new RegExp(e)))return"hex";e="^[ABLMRSxa-f0-9]{5,}";if(s.match(new RegExp(e)))return"fsw";if(e="^[0-9]{3}",s.match(new RegExp(e)))return"num";var e="^((\uD836[\uDC00-\uDDFF])|(\uD8C0[\uDC01-\uDFFF])|([\uD8C1-\uD8FC][\uDC00-\uDFFF])|(\uD8FD[\uDC00-\uDC80]))+";return s.match(new RegExp(e))?"swu":""},parse:function(s,e,r){var a,t,n,i,w=e||r?"":"^";switch(e||ssw.chars(s)){case"hex":a=w+"[A-F0-9]{5}";var f=s.match(new RegExp(a,r?"g":""));if(f)return i={chars:"hex",hex:f[0]},r?i.all=f:i.line=s,i;break;case"num":a=w+"[0-9]{3}";var c=s.match(new RegExp(a,r?"g":""));if(c)return i={chars:"num",num:c[0]},r?i.all=c:i.line=s,i;break;case"fsw":if(a=r?w+"("+ssw.re.fsw.sign+"("+ssw.re.style+")?|"+ssw.re.fsw.spatial+"("+ssw.re.style+")?)":w+ssw.re.fsw.sign+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"sign"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.fsw=t[0].slice(0,n),i.style=t[0].slice(n)):i.fsw=t[0],i;if(a=w+ssw.re.fsw.spatial+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"spatial"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.fsw=t[0].slice(0,n),i.style=t[0].slice(n)):i.fsw=t[0],i;if(a=w+ssw.re.fsw.symbol+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"symbol"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.fsw=t[0].slice(0,n),i.style=t[0].slice(n)):i.fsw=t[0],i;if(a=w+ssw.re.fsw.coord,t=s.match(new RegExp(a,r?"g":"")))return i={chars:"fsw",type:"coord",fsw:t[0]},r?i.all=t:i.line=s,i;break;case"swu":if(a=r?w+"("+ssw.re.swu.sign+"("+ssw.re.style+")?|"+ssw.re.swu.spatial+"("+ssw.re.style+")?)":w+ssw.re.swu.sign+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"sign"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.swu=t[0].slice(0,n),i.style=t[0].slice(n)):i.swu=t[0],i;if(a=w+ssw.re.swu.spatial+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"spatial"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.swu=t[0].slice(0,n),i.style=t[0].slice(n)):i.swu=t[0],i;if(a=w+ssw.re.swu.symbol+"("+ssw.re.style+")?",t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"symbol"},r?i.all=t:i.line=s,n=t[0].indexOf("-"),n>-1?(i.swu=t[0].slice(0,n),i.style=t[0].slice(n)):i.swu=t[0],i;if(a=w+ssw.re.swu.coord,t=s.match(new RegExp(a,r?"g":"")))return i={chars:"swu",type:"coord",swu:t[0]},r?i.all=t:i.line=s,i}return!1},fsw2swu:function(s){if(!s)return"";var e,r,a,t=parseInt("1D800",16),n=s.replace(/B/g,"B!"),i=(n=(n=(n=(n=(n=n.replace(/A/g,String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023)))).replace(/B!/g,String.fromCharCode(55296+(t+1-65536>>10),56320+(t+1-65536&1023)))).replace(/L/g,String.fromCharCode(55296+(t+2-65536>>10),56320+(t+2-65536&1023)))).replace(/M/g,String.fromCharCode(55296+(t+3-65536>>10),56320+(t+3-65536&1023)))).replace(/R/g,String.fromCharCode(55296+(t+4-65536>>10),56320+(t+4-65536&1023)))).match(new RegExp(ssw.re.fsw.coord,"g"));f=i?i.length:0;var w;for(w=0;w<f;w+=1)r=(r=(e=i[w]).split("x")).map(function(s){return s=120844+parseInt(s)-250,String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023))}),n=n.replace(e,r.join(""));var f=(i=n.match(new RegExp("S[123][0-9a-f]{2}[0-5][0-9a-f]","g")))?i.length:0;for(w=0;w<f;w+=1)a=i[w],n=n.replace(a,ssw.uni(a,"4"));return n},swu2fsw:function(s){if(!s)return"";var e=s.replace(//g,"A").replace(//g,"B").replace(//g,"L").replace(//g,"M").replace(//g,"R"),r=e.match(new RegExp(ssw.re.swu.symbol,"g"));r&&r.forEach(function(s){var r=ssw.swu2hex(s),a=parseInt(r.slice(1),16)-1,t=parseInt(a/96),n="S"+(t+256).toString(16),i=parseInt((a-96*t)/16);n+=i.toString(16),n+=parseInt(a-96*t-16*i).toString(16),e=e.replace(s,n)});var a=e.match(new RegExp(ssw.re.swu.coord,"g"));return a&&a.forEach(function(s){var r=parseInt(ssw.swu2hex(s.slice(0,2)),16)-120844+250,a=parseInt(ssw.swu2hex(s.slice(2,4)),16)-120844+250;if(!(r>=250&&r<749&&a>=250&&a<749))throw"invalid numbers: "+r+", "+a;e=e.replace(s,r+"x"+a)}),e},swu2hex:function(s){if(s.codePointAt(0)){var e=s.codePointAt(0).toString(16).toUpperCase();return!(e.length<=4)&&e}return!1},symbol:function(s,e){var r;switch(ssw.parse(s).chars){case"swu":r=ssw.re.swu.symbol+"("+ssw.re.swu.coord+")?";break;case"fsw":r=ssw.re.fsw.symbol+"("+ssw.re.fsw.coord+")?";break;default:return""}e&&(r+="("+ssw.re.style+")?");var a=s.match(new RegExp(r));return a?a[0]:""},sign:function(s,e){var r;switch(ssw.parse(s).chars){case"swu":r=ssw.re.swu.sign;break;case"fsw":r=ssw.re.fsw.sign;break;default:return""}e&&(r+="("+ssw.re.style+")?");var a=s.match(new RegExp(r));return a?a[0]:ssw.symbol(s,e)},mirror:function(s){s=ssw.symbol(s);var e,r=ssw.parse(s);switch(r.chars){case"swu":e=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":e=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";var a,t=s.slice(0,4),n=s.slice(4,5),i=parseInt(s.slice(5,6),16),w=t+"08",f=t+"18";for(ssw.size(w)||ssw.size(f)?a=8:(0!==i&&4!=i||(a=0),1!=i&&5!=i||(a=6),2!=i&&6!=i||(a=4),3!=i&&7!=i||(a=2)),s="";!ssw.size(s);)(i+=a)>7&&a<8&&(i-=8),i>15&&(i-=16),s=t+n+i.toString(16);return"swu"==r.chars&&(s=ssw.fsw2swu(s)),s+e},fill:function(s,e){s=ssw.symbol(s);var r,a=ssw.parse(s);switch(a.chars){case"swu":r=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":r=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";-1!=e&&(e=1);var t=s.slice(0,4),n=parseInt(s.slice(4,5)),i=s.slice(5,6);for(s="";!ssw.size(s);)(n+=e)>5&&(n=0),n<0&&(n=5),s=t+n+i;return"swu"==a.chars&&(s=ssw.fsw2swu(s)),s+r},rotate:function(s,e){s=ssw.symbol(s);var r,a=ssw.parse(s);switch(a.chars){case"swu":r=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":r=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";-1!=e&&(e=1);var t=s.slice(0,4),n=s.slice(4,5),i=parseInt(s.slice(5,6),16);for(s="";!ssw.size(s);)i>7?((i+=e)>15&&(i=8),i<8&&(i=15),s=t+n+i.toString(16)):((i-=e)>7&&(i=0),i<0&&(i=7),s=t+n+i);return"swu"==a.chars&&(s=ssw.fsw2swu(s)),s+r},scroll:function(s,e){s=ssw.symbol(s);var r,a=ssw.parse(s);switch(a.chars){case"swu":r=s.slice(2),s=ssw.swu2fsw(s.slice(0,2));break;case"fsw":r=s.slice(6),s=ssw.swu2fsw(s.slice(0,6));break;default:return!1}if(!ssw.size(s))return"";-1!=e&&(e=1);var t=parseInt(s.slice(1,4),16)+e,n=s.slice(4,5),i=s.slice(5,6),w="S"+t.toString(16)+n+i;return ssw.size(w)?s=w:(w=ssw.view(w),ssw.size(w)&&(s=w)),"swu"==a.chars&&(s=ssw.fsw2swu(s)),s+r},structure:function(s,e,r){switch(e=ssw.symbol(e),ssw.parse(e).chars){case"swu":e=ssw.swu2fsw(e)}var a={kind:["S100","S37f","S387"],category:["S100","S205","S2f7","S2ff","S36d","S37f","S387"],group:["S100","S10e","S11e","S144","S14c","S186","S1a4","S1ba","S1cd","S1f5","S205","S216","S22a","S255","S265","S288","S2a6","S2b7","S2d5","S2e3","S2f7","S2ff","S30a","S32a","S33b","S359","S36d","S376","S37f","S387"]}[s];if(!a)return e?"is"!=r&&"":[];if(!e&&!r)return a;r||(r="");var t;switch(r){case"is":return-1!=a.indexOf(e.slice(0,4));case"first":return a[0];case"last":return a.slice(-1)[0];case"prev":t=-2;break;case"":t=-1;break;case"next":t=0;break;default:return""}var n,i=a.length;for(n=0;n<a.length;n+=1)if(parseInt(e.slice(1,4),16)<parseInt(a[n].slice(1,4),16)){i=n;break}return i+=t,i=i<0?0:i>=a.length?a.length-1:i,a[i]},type:function(s){var e,r;switch(s){case"writing":e="100",r="37e";break;case"hand":e="100",r="204";break;case"movement":e="205",r="2f6";break;case"dynamic":e="2f7",r="2fe";break;case"head":case"hcenter":e="2ff",r="36c";break;case"vcenter":e="2ff",r="375";break;case"trunk":e="36d",r="375";break;case"limb":e="376",r="37e";break;case"location":e="37f",r="386";break;case"punctuation":e="387",r="38b";break;default:e="100",r="38b"}return[e,r]},is:function(s,e){switch(s=ssw.symbol(s),ssw.parse(s).chars){case"swu":s=ssw.swu2fsw(s);case"fsw":break;default:return!1}var r=ssw.type(e),a=r[0],t=r[1],n=s.slice(1,4);return parseInt(a,16)<=parseInt(n,16)&&parseInt(t,16)>=parseInt(n,16)},filter:function(s,e){var r;switch(ssw.chars(s)){case"swu":r=ssw.parse(s,"swu","spatials"),s=ssw.swu2fsw((r.all||[]).join(""));break;case"fsw":s=((r=ssw.parse(s,"fsw","spatials")).all||[]).join("");break;default:return""}var a=ssw.type(e),t=a[0],n=a[1],i="S"+ssw.range(t,n,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",w=s.match(new RegExp(i,"g"));return w?(s=w.join(""),"swu"==r.chars&&(s=ssw.fsw2swu(s)),s):""},random:function(s,e){var r=ssw.type(s),a=r[0],t=r[1],n=Math.floor(Math.random()*(parseInt(t,16)-parseInt(a,16)+1)+parseInt(a,16)),i=Math.floor(6*Math.random()),w=Math.floor(16*Math.random()),f="S"+n.toString(16)+i.toString(16)+w.toString(16);return ssw.size(f)?e?ssw.fsw2swu(f):f:ssw.random(s,e)},colorize:function(s){s=ssw.symbol(s),"swu"==ssw.chars(s)&&(s=ssw.swu2fsw(s));var e="000000";return ssw.is(s,"hand")&&(e="0000CC"),ssw.is(s,"movement")&&(e="CC0000"),ssw.is(s,"dynamic")&&(e="FF0099"),ssw.is(s,"head")&&(e="006600"),ssw.is(s,"location")&&(e="884411"),ssw.is(s,"punctuation")&&(e="FF9900"),e},view:function(s,e){s=ssw.symbol(s);var r=ssw.chars(s);if("swu"==r&&(s=ssw.swu2fsw(s)),!ssw.is(s))return"";var a=s.slice(0,4);return s=e?a+(ssw.size(a+"00")?"0":"1")+"0":a+(ssw.is(s,"hand")&&!ssw.structure("group",s,"is")?"1":"0")+"0","swu"==r?ssw.fsw2swu(s):s},uni:function(s,e,r){var a,t,n,i=ssw.parse(s);switch(i.chars){case"swu":a=ssw.re.swu.symbol;break;case"fsw":a=ssw.re.fsw.symbol;break;case"hex":a="[0-9A-F]{5}";break;default:return!1}var w,f=s.match(new RegExp(a,"g")),c=f?f.length:0;for(t=0;t<c;t+=1){switch(n=f[t],i.chars){case"swu":n=ssw.swu2fsw(n);case"fsw":w=parseInt(e+"0000",16)+96*(parseInt(n.slice(1,4),16)-256)+16*parseInt(n.slice(4,5),16)+parseInt(n.slice(5,6),16)+1;break;case"hex":w=parseInt(n,16)}n=n.replace(n.substr(0,6),r?w.toString(16).toUpperCase():String.fromCharCode(55296+(w-65536>>10),56320+(w-65536&1023))),s=s.replace(f[t],n)}return s},bbox:function(s){var e=ssw.chars(s);"swu"==e&&(s=ssw.swu2fsw(s));var r,a,t,n,i,w,f=/[0-9]{3}x[0-9]{3}/g,c=s.match(f);if(c){var l;for(l=0;l<c.length;l+=1)r=parseInt(c[l].slice(0,3)),a=parseInt(c[l].slice(4,7)),0===l?(t=r,n=r,i=a,w=a):(t=Math.min(t,r),n=Math.max(n,r),i=Math.min(i,a),w=Math.max(w,a));return t==n&&i==w&&(t>500?t=1e3-t:n=1e3-n,i>500?i=1e3-i:w=1e3-w),"swu"==e?ssw.fsw2swu(t+"x"+n+i+"x"+w):t+" "+n+" "+i+" "+w}return""},displace:function(s,e,r){var a=ssw.chars(s);"swu"==a&&(s=ssw.swu2fsw(s));var t,n,i=s.match(new RegExp("[0-9]{3}x[0-9]{3}","g"));if(i){var w;for(w=0;w<i.length;w+=1)t=parseInt(i[w].slice(0,3))+e,n=parseInt(i[w].slice(4,7))+r,s=s.replace(i[w],t+"X"+n);s=s.replace(/X/g,"x")}return"swu"==a?ssw.fsw2swu(s):s},sizes:{},size:function(s){var e=ssw.parse(s);switch(e.chars){case"swu":s=ssw.swu2fsw(s);break;case"fsw":break;default:return!1}if("sign"==e.type||"spatial"==e.type){var r=ssw.bbox(ssw.sign(s)),a=(r=r.split(" "))[0],t=r[1],n=r[2];return c=t-a+"x"+(r[3]-n),"0x0"==c?"":c}ssw.sign(s);var i,w,f,c,l=ssw.symbol(s);if(!l)return"";if(ssw.sizes[l])return ssw.sizes[l];var u,p;ssw.canvaser||(ssw.canvaser=document.createElement("canvas"),ssw.canvaser.width=152,ssw.canvaser.height=152);var o=ssw.canvaser.getContext("2d");o.clearRect(0,0,152,152),o.font="60px 'SuttonSignWritingLine'",o.fillText(ssw.uni(l,"F"),0,0),u=o.getImageData(0,0,152,152).data;s:for(i=151;i>=0;i--)for(w=0;w<152;w+=1)for(f=0;f<4;f+=1)if(p=4*i+4*w*152+f,u[p])break s;var g=i;s:for(w=151;w>=0;w--)for(i=0;i<g;i+=1)for(f=0;f<4;f+=1)if(p=4*i+4*w*152+f,u[p])break s;var Z=w+1;if(g=""+Math.ceil(g/2),Z=""+Math.ceil(Z/2),"S19559".indexOf(l)>-1&&(g="19"),"S16d03 S16d0f S16d1f S16d2f S16d23 S16d43 S16d53 S1710d S1711d S1712d S17311 S17321 S17733 S1773f S17743 S1774f S17753 S1775f S16d33 S1713d S1714d S17301 S17329 S1715d".indexOf(l)>-1&&(g="20"),"S24c15 S24c30".indexOf(l)>-1&&(g="22"),"S2903b".indexOf(l)>-1&&(g="23"),"S1d203 S1d233".indexOf(l)>-1&&(g="25"),"S24c15".indexOf(l)>-1&&(g="28"),"S2e629".indexOf(l)>-1&&(g="29"),"S23425".indexOf(l)>-1&&(g="30"),"S2d316".indexOf(l)>-1&&(g="40"),"S2541a".indexOf(l)>-1&&(g="50"),"S1732f S17731 S17741 S17751".indexOf(l)>-1&&(Z="20"),"S1412c".indexOf(l)>-1&&(Z="21"),"S2a903".indexOf(l)>-1&&(Z="31"),"S2b002".indexOf(l)>-1&&(Z="36"),"0x0"==(c=g+"x"+Z)){var h="S1000815x30 S1000921x30 S1000a30x15 S1000b30x21 S1000c15x30 S1000d21x30 ",x=h.indexOf(l);if(-1==x)c="";else{var d=h.indexOf(" ",x);c=h.slice(x+6,d)}}else ssw.sizes[l]=c;return c},max:function(s,e){var r=ssw.chars(s);"swu"==r&&(s=ssw.swu2fsw(s));var a=ssw.type(e),t=a[0],n=a[1],i="S"+ssw.range(t,n,1)+"[0-5][0-9a-f][0-9]{3}x[0-9]{3}",w=s.match(new RegExp(i,"g"));if(w){var f,c,l,u,p,o="";for(p=0;p<w.length;p+=1)f=w[p].slice(0,6),c=parseInt(w[p].slice(6,9)),l=parseInt(w[p].slice(10,13)),u=ssw.size(f).split("x"),o+=f+c+"x"+l+(c+parseInt(u[0]))+"x"+(l+parseInt(u[1]));return"swu"==r?ssw.fsw2swu(o):o}return""},norm:function(s){var e=ssw.chars(s);"swu"==e&&(s=ssw.swu2fsw(s));var r,a,t,n,i=ssw.bbox(ssw.max(s,"hcenter")),w=ssw.bbox(ssw.max(s,"vcenter")),f=ssw.bbox(ssw.max(s));if(!f)return"";w?(r=parseInt(w.slice(0,3)),a=parseInt(w.slice(4,7))):(r=parseInt(f.slice(0,3)),a=parseInt(f.slice(4,7))),i?(t=parseInt(i.slice(8,11)),n=parseInt(i.slice(12,15))):(t=parseInt(f.slice(8,11)),n=parseInt(f.slice(12,15)));var c=500-parseInt((r+a)/2),l=500-parseInt((t+n)/2),u=s.match(/(A(S[123][0-9a-f]{2}[0-5][0-9a-f])+)?[BLMR]/);return u=u?u[0]:"M",s=u+parseInt(f.slice(4,7))+"x"+parseInt(f.slice(12,15))+ssw.filter(s),s=ssw.displace(s,c,l),"swu"==e?ssw.fsw2swu(s):s},svg:function(s,e){var r=ssw.sign(s,!0),a=ssw.parse(r),t=a.chars;if("swu"==t&&(r=ssw.swu2fsw(r)),!r)return"";var n;(w=r.indexOf("-"))>-1&&(n=r.slice(w));var i,w,f,c,l,u;if("symbol"==a.type){var p=ssw.symbol(r);if(!(f=ssw.size(p)))return"";r=6==p.length?p+"500x500":p}if(e||(e={}),e.size?e.size=parseFloat(e.size)||"x":e.size=1,e.colorize?e.colorize=!0:e.colorize=!1,e.pad?e.pad=parseInt(e.pad):e.pad=0,e.line?e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.line)?"#"+e.line:e.line:e.line="black",e.fill?e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.fill)?"#"+e.fill:e.fill:e.fill="white",e.back?e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.back)?"#"+e.back:e.back:e.back="",e.E=[],e.F=[],e.copy=e.copy||t,n){var o;if(i=n.split("-"),o=i[1].match(/C/),e.colorize=!!o,(o=i[1].match(/P[0-9]{2}/))&&(e.pad=parseInt(o[0].substring(1,o[0].length))),o=i[1].match(/G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_/)){var g=o[0].substring(2,o[0].length-1);e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(g)?"#"+g:g}if((o=i[1].match(/D_([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?_/))&&((c=o[0].substring(2,o[0].length-1).split(","))[0]&&(e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[0])?"#"+c[0]:c[0]),c[1]&&(e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[1])?"#"+c[1]:c[1])),(o=i[1].match(/Z([0-9]+(\.[0-9]+)?|x)/))&&(e.size=parseFloat(o[0].substring(1,o[0].length))||"x"),i[2]||(i[2]=""),o=i[2].match(/D[0-9]{2}_([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?_/g))for(l=0;l<o.length;l+=1)w=parseInt(o[l].substring(1,3)),(c=o[l].substring(4,o[l].length-1).split(","))[0]&&(c[0]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[0])?"#"+c[0]:c[0]),c[1]&&(c[1]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(c[1])?"#"+c[1]:c[1]),e.E[w]=c;if(o=i[2].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g))for(l=0;l<o.length;l+=1)w=parseInt(o[l].substring(1,3)),(u=o[l].substring(4,o[l].length).split(","))[0]=parseFloat(u[0]),e.F[w]=u;i.length>3&&(i=i.slice(3).join("-").split("!"),e.class=i[0]?i[0]:"",e.id=i[1]?i[1]:"")}var Z,h,x,d=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,F={};F.L=-1,F.R=1;var D,b,S,m,C,v,I=500,y=500,U=500,A=500;S=r.charAt(0);var k=ssw.bbox(r);k=k.split(" "),I=parseInt(k[0]),y=parseInt(k[1]),U=parseInt(k[2]),A=parseInt(k[3]),"S"==S&&(500==I&&500==U?(u=f.split("x"),y=500+parseInt(u[0]),A=500+parseInt(u[1])):(y=1e3-I,A=1e3-U)),(h=r.match(d))||(h=[]);var z;for(l=0;l<h.length;l+=1)Z=h[l].slice(0,6),D=h[l].slice(6,9),b=h[l].slice(10,13),e.F[l+1]&&(e.F[l+1][1]&&(D=parseInt(D)+parseInt(e.F[l+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(e.F[l+1][1].slice(4,7))-500,I=Math.min(I,D),U=Math.min(U,b)),(z=ssw.size(Z))&&(z=z.split("x"),y=Math.max(y,parseInt(D)+e.F[l+1][0]*parseInt(z[0])),A=Math.max(A,parseInt(b)+e.F[l+1][0]*parseInt(z[1])))),x='<g transform="translate('+D+","+(b=parseInt(b))+')">',x+="<text ",x+='class="sym-fill" ',e.css||(x+="style=\"pointer-events:none;font-family:'SuttonSignWritingFill';font-size:"+(e.F[l+1]?30*e.F[l+1][0]:30)+"px;fill:"+(e.E[l+1]&&e.E[l+1][1]?e.E[l+1][1]:e.fill)+";",x+='"'),x+=">",x+=ssw.uni(Z,"10"),x+="</text>",x+="<text ",x+='class="sym-line" ',e.css||(x+='style="pointer-events:none;',x+="font-family:'SuttonSignWritingLine';font-size:"+(e.F[l+1]?30*e.F[l+1][0]:30)+"px;fill:"+(e.E[l+1]?e.E[l+1][0]:e.colorize?"#"+ssw.colorize(Z):e.line)+";",x+='"'),x+=">",x+=ssw.uni(Z,"F"),x+="</text>",x+="</g>",h[l]=x;I-=e.pad,y+=e.pad,U-=e.pad,m=y-I,C=(A+=e.pad)-U,v=75*(v=F[S]||0)+I-400;var R="<svg ";return e.class&&(R+='class="'+e.class+'" '),e.id&&(R+='id="'+e.id+'" '),R+='version="1.1" xmlns="http://www.w3.org/2000/svg" ',"x"!=e.size&&(R+='width="'+m*e.size+'" height="'+C*e.size+'" '),R+='viewBox="'+I+" "+U+" "+m+" "+C+'">',R+='<text style="font-size:0%;">',"swu"==e.copy?R+=ssw.fsw2swu(r):R+=s,R+="</text>",e.back&&(R+='  <rect x="'+I+'" y="'+U+'" width="'+m+'" height="'+C+'" style="fill:'+e.back+';" />'),R+=h.join("")+"</svg>",e.laned&&(R='<div style="padding:10px;position:relative;width:'+m+"px;height:"+C+"px;left:"+v+'px;">'+R+"</div>"),R},canvas:function(s,e){var r=document.createElement("canvas"),a=ssw.sign(s,!0),t=ssw.parse(a);"swu"==ssw.chars(a)&&(a=ssw.swu2fsw(a));var n;(p=a.indexOf("-"))>-1&&(n=a.slice(p));var i,w,f,c,l,u,p;if("symbol"==t.type){var o=ssw.symbol(a);if(f=ssw.size(o),!o)return"";a=6==o.length?o+"500x500":o}if(e||(e={}),e.size?e.size=parseFloat(e.size):e.size=1,e.colorize?e.colorize=!0:e.colorize=!1,e.pad?e.pad=parseInt(e.pad):e.pad=0,e.line?e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.line)?"#"+e.line:e.line:e.line="black",e.fill?e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.fill)?"#"+e.fill:e.fill:e.fill="white",e.back?e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(e.back)?"#"+e.back:e.back:e.back="",e.E=[],e.F=[],n){var g;if(i=n.split("-"),g=i[1].match(/C/),e.colorize=!!g,(g=i[1].match(/P[0-9]{2}/))&&(e.pad=parseInt(g[0].substring(1,g[0].length))),g=i[1].match(/G_([0-9a-fA-F]{3}([0-9a-fA-F]{3})?|[a-zA-Z]+)_/)){var Z=g[0].substring(2,g[0].length-1);e.back=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(Z)?"#"+Z:Z}if((g=i[1].match(/D_([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-zA-Z]+))?_/))&&((w=g[0].substring(2,g[0].length-1).split(","))[0]&&(e.line=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[0])?"#"+w[0]:w[0]),w[1]&&(e.fill=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[1])?"#"+w[1]:w[1])),(g=i[1].match(/Z[0-9]+(\.[0-9]+)?/))&&(e.size=g[0].substring(1,g[0].length)),i[2]||(i[2]=""),g=i[2].match(/D[0-9]{2}_([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+)(,([0-9a-f]{3}([0-9a-f]{3})?|[a-wyzA-Z]+))?_/g))for(u=0;u<g.length;u+=1)p=parseInt(g[u].substring(1,3)),(w=g[u].substring(4,g[u].length-1).split(","))[0]&&(w[0]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[0])?"#"+w[0]:w[0]),w[1]&&(w[1]=/^[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/g.test(w[1])?"#"+w[1]:w[1]),e.E[p]=w;if(g=i[2].match(/Z[0-9]{2},[0-9]+(\.[0-9]+)?(,[0-9]{3}x[0-9]{3})?/g))for(u=0;u<g.length;u+=1)p=parseInt(g[u].substring(1,3)),(l=g[u].substring(4,g[u].length).split(","))[0]=parseFloat(l[0]),e.F[p]=l}var h,x,d=/S[123][0-9a-f]{2}[0-5][0-9a-f][0-9]{3}x[0-9]{3}/g,F={};F.L=-1,F.R=1;var D,b,S,m,C,v=500,I=500,y=500,U=500;S=a.charAt(0);var A=ssw.bbox(a);A=A.split(" "),v=parseInt(A[0]),I=parseInt(A[1]),y=parseInt(A[2]),U=parseInt(A[3]),"S"==S&&(500==v&&500==y?(l=f.split("x"),I=500+parseInt(l[0]),U=500+parseInt(l[1])):(I=1e3-v,U=1e3-y));var k=(x=a.match(d))?x.length:0;for(u=0;u<k;u+=1)h=x[u].slice(0,6),D=x[u].slice(6,9),b=x[u].slice(10,13),e.F[u+1]&&(e.F[u+1][1]&&(D=parseInt(D)+parseInt(e.F[u+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(e.F[u+1][1].slice(4,7))-500,v=Math.min(v,D),y=Math.min(y,b)),(c=ssw.size(h))&&(c=c.split("x"),I=Math.max(I,parseInt(D)+e.F[u+1][0]*parseInt(c[0])),U=Math.max(U,parseInt(b)+e.F[u+1][0]*parseInt(c[1]))));v-=e.pad,I+=e.pad,y-=e.pad,U+=e.pad,m=(I-v)*e.size,C=(U-y)*e.size,r.width=m||1,r.height=C||1;var z=r.getContext("2d");for(e.back&&(z.rect(0,0,m,C),z.fillStyle=e.back,z.fill()),x=a.match(d),u=0;u<k;u+=1)h=x[u].slice(0,6),D=x[u].slice(6,9),b=x[u].slice(10,13),e.F[u+1]&&(e.F[u+1][1]&&(D=parseInt(D)+parseInt(e.F[u+1][1].slice(0,3))-500,b=parseInt(b)+parseInt(e.F[u+1][1].slice(4,7))-500,v=Math.min(v,D),y=Math.min(y,b)),(c=ssw.size(h))&&(c=c.split("x"),I=Math.max(I,parseInt(D)+e.F[u+1][0]*parseInt(c[0])),U=Math.max(U,parseInt(b)+e.F[u+1][0]*parseInt(c[1])))),z.font=(e.F[u+1]?30*e.size*e.F[u+1][0]:30*e.size)+"px 'SuttonSignWritingFill'",z.fillStyle=e.E[u+1]&&e.E[u+1][1]?e.E[u+1][1]:e.fill,z.fillText(ssw.uni(h,"10"),(D-v)*e.size,(b-y)*e.size),z.font=(e.F[u+1]?30*e.size*e.F[u+1][0]:30*e.size)+"px 'SuttonSignWritingLine'",z.fillStyle=e.E[u+1]?e.E[u+1][0]:e.colorize?"#"+ssw.colorize(h):e.line,z.fillText(ssw.uni(h,"F"),(D-v)*e.size,(b-y)*e.size);return r},png:function(s,e){if("swu"==ssw.chars(s)&&(s=ssw.swu2fsw(s)),ssw.sign(s,!0)||ssw.symbol(s,!0)){var r=ssw.canvas(s,e),a=r.toDataURL("image/png");return r.remove(),a}return""},query:function(s){return"-"==s?"-":(s=s.match(new RegExp(ssw.re.fsw.query)),s?s[0]:"")},queryu:function(s){return"-"==s?"-":(s=s.match(new RegExp(ssw.re.swu.query)),s?s[0]:"")},query2swu:function(s){if(!(s=ssw.query(s)))return"";var e,r,a,t,n,i,w,f;if(e=s.match(new RegExp("[0-9]{3}x[0-9]{3}","g")))for(r=0;r<e.length;r+=1)s=s.replace(e[r],ssw.fsw2swu(e[r]));if(e=s.match(new RegExp("R[123][0-9a-f]{2}t[123][0-9a-f]{2}","g")))for(r=0;r<e.length;r+=1)a=ssw.view("S"+e[r].slice(1,4)+"00"),t=ssw.view("S"+e[r].slice(5,8)+"00"),n="R"+ssw.fsw2swu(a)+ssw.fsw2swu(t),s=s.replace(e[r],n);if(e=s.match(new RegExp("S[123][0-9a-f]{2}[0-5u][0-9a-fu]","g")))for(r=0;r<e.length;r+=1)i=e[r].slice(0,4),"u"==(w=e[r].slice(4,5))?(i+=ssw.view(i+"00").slice(4,5),w="f"):(i+=w,w=""),"u"==(f=e[r].slice(5,6))?(i+="0",f="r"):(i+=f,f=""),s=s.replace(e[r],ssw.fsw2swu(i)+w+f);return s},query2fsw:function(s){if(!(s=ssw.queryu(s)))return"";var e,r,a,t,n=ssw.re.swu.symbol,i=ssw.re.swu.coord,w="R"+n+n,f=n+"f?r?";if(e=s.match(new RegExp(i,"g")))for(r=0;r<e.length;r+=1)s=s.replace(e[r],ssw.swu2fsw(e[r]));if(e=s.match(new RegExp(w,"g")))for(r=0;r<e.length;r+=1)a="R"+ssw.swu2fsw(e[r].slice(1,3)).slice(1,4)+"t"+ssw.swu2fsw(e[r].slice(-2)).slice(1,4),s=s.replace(e[r],a);if(e=s.match(new RegExp(f,"g")))for(r=0;r<e.length;r+=1)t=ssw.swu2fsw(e[r].slice(0,2)),e[r].indexOf("f")>-1&&(t=t.slice(0,4)+"u"+t.slice(5,6)),e[r].indexOf("r")>-1&&(t=t.slice(0,5)+"u"),s=s.replace(e[r],t);return s},range:function(s,e,r){var a,t,n,i,w,f,c;if(r||(r=""),s=("000"+s).slice(-3),e=""+e,a="",s===e)return s;if(t=[],(s[0]!=e[0]||s[1]!=e[1])&&"0"!=s[2])if(a=s[0]+s[1],r){switch(s[2]){case"f":a+="f";break;case"e":a+="[ef]";break;case"d":case"c":case"b":case"a":a+="["+s[2]+"-f]";break;default:switch(s[2]){case"9":a+="[9a-f]";break;case"8":a+="[89a-f]";break;default:a+="["+s[2]+"-9a-f]"}}n=15-parseInt(s[2],16)+1,s=""+(parseInt(s,16)+n).toString(16),t.push(a)}else{switch(s[2]){case"9":a+="9";break;case"8":a+="[89]";break;default:a+="["+s[2]+"-9]"}s=""+(1*s+(n=9-s[2]+1)),t.push(a)}if(a="",s[0]!=e[0]&&"0"!=s[1])if(r){switch(a=s[0],s[1]){case"f":a+="f";break;case"e":a+="[ef]";break;case"d":case"c":case"b":case"a":a+="["+s[1]+"-f]";break;case"9":a+="[9a-f]";break;case"8":a+="[89a-f]";break;default:a+="["+s[1]+"-9a-f]"}a+="[0-9a-f]",n=15-parseInt(s[1],16)+1,s=""+(parseInt(s,16)+16*n).toString(16),t.push(a)}else{switch(a=s[0],n=9-s[1]+1,s[1]){case"9":a+="9";break;case"8":a+="[89]";break;default:a+="["+s[1]+"-9]"}a+="[0-9]",s=""+(1*s+10*(n=9-s[1]+1)),t.push(a)}if(a="",s[0]!=e[0])if(r){switch(n=parseInt(e[0],16)-parseInt(s[0],16),i=(parseInt(s[0],16)+n-1).toString(16),n){case 1:a=s[0];break;case 2:a="["+s[0]+i+"]";break;default:switch(f=parseInt(s[0],16)>9?"h":"d",c=parseInt(i,16)>9?"h":"d",f+c){case"dd":a+="["+s[0]+"-"+i+"]";break;case"dh":switch(n=9-s[0]){case 0:a+="[9";break;case 1:a+="[89";break;default:a+="["+s[0]+"-9"}switch(i[0]){case"a":a+="a]";break;case"b":a+="ab]";break;default:a+="a-"+i+"]"}break;case"hh":a+="["+s[0]+"-"+i+"]"}}a+="[0-9a-f][0-9a-f]",n=parseInt(e[0],16)-parseInt(s[0],16),s=""+(parseInt(s,16)+256*n).toString(16),t.push(a)}else{switch(n=e[0]-s[0],i=1*s[0]+n-1,n){case 1:a=s[0];break;case 2:a="["+s[0]+i+"]";break;default:a="["+s[0]+"-"+i+"]"}a+="[0-9][0-9]",s=""+(1*s+100*n),t.push(a)}if(a="",s[1]!=e[1])if(r){switch(n=parseInt(e[1],16)-parseInt(s[1],16),i=(parseInt(s[1],16)+n-1).toString(16),a=s[0],n){case 1:a+=s[1];break;case 2:a+="["+s[1]+i+"]";break;default:switch(f=parseInt(s[1],16)>9?"h":"d",c=parseInt(i,16)>9?"h":"d",f+c){case"dd":a+="["+s[1],n>1&&(a+="-"),a+=i+"]";break;case"dh":switch(n=9-s[1]){case 0:a+="[9";break;case 1:a+="[89";break;default:a+="["+s[1]+"-9"}switch(e[1]){case"a":a+="]";break;case"b":a+="a]";break;default:a+="a-"+(parseInt(e[1],16)-1).toString(16)+"]"}break;case"hh":a+="["+s[1],n>1&&(a+="-"),a+=(parseInt(e[1],16)-1).toString(16)+"]"}}a+="[0-9a-f]",n=parseInt(e[1],16)-parseInt(s[1],16),s=""+(parseInt(s,16)+16*n).toString(16),t.push(a)}else{switch(n=e[1]-s[1],i=1*s[1]+n-1,a=s[0],n){case 1:a+=s[1];break;case 2:a+="["+s[1]+i+"]";break;default:a+="["+s[1]+"-"+i+"]"}a+="[0-9]",s=""+(1*s+10*n),t.push(a)}if(a="",s[2]!=e[2])if(r){switch(a=s[0]+s[1],n=parseInt(e[2],16)-parseInt(s[2],16),f=parseInt(s[2],16)>9?"h":"d",c=parseInt(e[2],16)>9?"h":"d",f+c){case"dd":a+="["+s[2],n>1&&(a+="-"),a+=e[2]+"]";break;case"dh":switch(n=9-s[2]){case 0:a+="[9";break;case 1:a+="[89";break;default:a+="["+s[2]+"-9"}switch(e[2]){case"a":a+="a]";break;case"b":a+="ab]";break;default:a+="a-"+e[2]+"]"}break;case"hh":a+="["+s[2],n>1&&(a+="-"),a+=e[2]+"]"}n=parseInt(e[2],16)-parseInt(s[2],16),s=""+(parseInt(s,16)+n).toString(16),t.push(a)}else{switch(n=e[2]-s[2],a=s[0]+s[1],n){case 0:a+=s[2];break;case 1:a+="["+s[2]+e[2]+"]";break;default:a+="["+s[2]+"-"+e[2]+"]"}s=""+(1*s+n),t.push(a)}return a="","0"==s[2]&&"0"==e[2]&&(a=e,t.push(a)),a="",w=t.length,a=1==w?t[0]:"(("+(a=t.join(")|("))+"))"},rangeu:function(s,e){e=e||"";var r;switch(ssw.chars(s)){case"fsw":case"num":if(r=(s+"x"+e).split("x"),s=(parseInt("1D906",16)+parseInt(r[0])-500).toString(16),e=(parseInt("1D906",16)+parseInt(r[1])-500).toString(16),s<250||s>749||s<250||s>749)return!1;break;case"swu":if("coord"==(r=ssw.parse(s+e,"swu",!0)).type)s=ssw.swu2hex(r.all[0].substr(0,2)),e=ssw.swu2hex(r.all[0].substr(2,2));else{if("symbol"!=r.type)return!1;if(r.all.length<2)return!1;s=ssw.swu2hex(r.all[0]),e=ssw.swu2hex(r.all[1])}}if(s>e)return"";var a,t,n,i="",w=[];if(t=parseInt(s,16),n=String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023)),s=[n.charCodeAt(0).toString(16).toUpperCase(),n.charCodeAt(1).toString(16).toUpperCase()],t=parseInt(e,16),n=String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023)),e=[n.charCodeAt(0).toString(16).toUpperCase(),n.charCodeAt(1).toString(16).toUpperCase()],2!=s.length&&2!=e.length)return"";if(s[0]==e[0])s[1]==e[1]?(i="\\u"+s[0]+"\\u"+s[1],w.push(i)):(i="\\u"+s[0]+"[\\u"+s[1]+"-\\u"+e[1]+"]",w.push(i));else{i="DFFF"==s[1]?"\\u"+s[0]+"\\uDFFF":"\\u"+s[0]+"[\\u"+s[1]+"-\\uDFFF]",w.push(i);var f=parseInt(e[0],16)-parseInt(s[0],16);2==f&&(i="\\u"+(parseInt(s[0],16)+1).toString(16).toUpperCase(),i+="[\\uDC00-\\uDFFF]",w.push(i)),f>2&&(i="[",i+="\\u"+(parseInt(s[0],16)+1).toString(16).toUpperCase(),i+="-\\u"+(parseInt(e[0],16)-1).toString(16).toUpperCase(),i+="][\\uDC00-\\uDFFF]",w.push(i)),i="DC00"==e[1]?"\\u"+e[0]+"\\uDC00":"\\u"+e[0]+"[\\uDC00-\\u"+e[1]+"]",w.push(i)}return a=w.length,i=1==a?w[0]:"(("+(i=w.join(")|("))+"))",ssw.decode(i)},ranges:function(s){var e=s.match(new RegExp(ssw.re.swu.symbol+"f?r?"));if(e){var r,a,t=e[0].slice(0,2),n=ssw.swu2fsw(t),i=n.slice(0,4);return"fr"==e[0].slice(-2)?(r=ssw.fsw2swu(i+"00"),a=ssw.fsw2swu(i+"4f"),ssw.rangeu(r,a)):"r"==e[0].slice(-1)?(r=ssw.fsw2swu(n.slice(0,5)+"0"),a=ssw.fsw2swu(n.slice(0,5)+"f"),ssw.rangeu(r,a)):"f"==e[0].slice(-1)?"("+[0,1,2,3,4,5].map(function(s){return ssw.fsw2swu(i+s+n.slice(-1))}).join("|")+")":t}return""},regex:function(s,e){if(!(s=ssw.query(s)))return"";var r,a,t,n,i,w,f,c,l,u,p;e||(e=20);var o,g="S[123][0-9a-f]{2}[0-5][0-9a-f]",Z="[0-9]{3}x[0-9]{3}",h="[BLMR]("+Z+")("+g+Z+")*",x="(A("+g+")+)",d="R[123][0-9a-f]{2}t[123][0-9a-f]{2}",F="S[123][0-9a-f]{2}[0-5u][0-9a-fu]",D="("+ssw.re.style+")?";if("-"==s)return[q_styling];if("Q"==s)return[x+"?"+h];if("Q-"==s)return[x+"?"+h+D];if("QT"==s)return[x+h];if("QT-"==s)return[x+h+D];var b=[],S=s.indexOf("T")+1;if(S){o="(A";var m=s.slice(0,S);if(s=s.replace(m,""),"QT"==m)o+="("+g+")+)";else if(r=m.match(new RegExp("("+F+"|"+d+")","g"))){var C;for(a=0;a<r.length;a+=1)(C=r[a].match(new RegExp(F)))?(f=C[0].slice(0,4),f+="u"==(u=C[0].slice(4,5))?"[0-5]":u,o+=f+="u"==(p=C[0].slice(5,6))?"[0-9a-f]":p):(i=r[a].slice(1,4),w=r[a].slice(5,8),o+=f="S"+ssw.range(i,w,"hex")+"[0-5][0-9a-f]");o+="("+g+")*)"}}if((r=s.match(new RegExp("(V[0-9]+)","g")))&&(e=1*r.toString().slice(1)),t=F+"([0-9]{3}x[0-9]{3})?",r=s.match(new RegExp(t,"g")))for(a=0;a<r.length;a+=1)f="S"+(n=r[a].toString()).slice(1,4),f+="u"==(u=n.slice(4,5))?"[0-5]":u,f+="u"==(p=n.slice(5,6))?"[0-9a-f]":p,n.length>6?(c=1*n.slice(6,9),l=1*n.slice(10,13),f+=ssw.range(c-e,c+e),f+="x",f+=ssw.range(l-e,l+e)):f+=Z,f=h+f+"("+g+Z+")*",f=S?o+f:x+"?"+f,s.indexOf("-")>0&&(f+=D),b.push(f);if(t=d+"([0-9]{3}x[0-9]{3})?",r=s.match(new RegExp(t,"g")))for(a=0;a<r.length;a+=1)i=(n=r[a].toString()).slice(1,4),w=n.slice(5,8),f="S"+ssw.range(i,w,"hex")+"[0-5][0-9a-f]",n.length>8?(c=1*n.slice(8,11),l=1*n.slice(12,15),f+=ssw.range(c-e,c+e),f+="x",f+=ssw.range(l-e,l+e)):f+=Z,f=h+f+"("+g+Z+")*",f=S?o+f:x+"?"+f,s.indexOf("-")>0&&(f+=D),b.push(f);return b.length||(s.indexOf("-")>0&&(f+=D),b.push(o+h)),b},regexu:function(s,e){if(!(s=ssw.queryu(s)))return"";var r,a,t,n,i,w,f,c,l;e||(e=20);var u,p=ssw.re.swu.symbol,o=ssw.re.swu.coord,g=ssw.re.swu.box+o+"("+p+o+")*",Z="("+ssw.re.swu.sort+"("+p+")+)",h="R"+p+p,x=p+"f?r?",d="("+o+")?",F="("+ssw.re.style+")?";if("-"==s)return ssw.re.style;if("Q"==s)return[ssw.re.swu.sign];if("Q-"==s)return[ssw.re.swu.sign+"("+ssw.re.style+")?"];if("QT"==s)return[ssw.re.swu.sort+ssw.re.swu.symbol+"+"+ssw.re.swu.box+ssw.re.swu.coord+"("+ssw.re.swu.spatial+")*"];if("QT-"==s)return[ssw.re.swu.sort+ssw.re.swu.symbol+"+"+ssw.re.swu.box+ssw.re.swu.coord+"("+ssw.re.swu.spatial+")*("+ssw.re.style+")?"];var D,b=[],S=s.indexOf("T")+1;if(S){u="("+ssw.re.swu.sort;var m=s.slice(0,S);if(s=s.replace(m,""),"QT"==m)u+="("+p+")+)";else if(r=m.match(new RegExp("("+x+"|"+h+")","g"))){var C;for(a=0;a<r.length;a+=1)(C=r[a].match(new RegExp("^"+x)))?u+=ssw.ranges(C[0]):(n=ssw.swu2fsw(r[a].slice(1,3)),i=ssw.swu2fsw(r[a].slice(-2)),n=ssw.fsw2swu(n.slice(0,4)+"00"),i=ssw.fsw2swu(i.slice(0,4)+"5f"),u+=ssw.rangeu(n,i));u+="("+p+")*)"}}if((r=s.match(new RegExp("(V[0-9]+)","g")))&&(e=1*r.toString().slice(1)),x+d,r=s.match(new RegExp("("+h+d+"|"+x+d+")","g")))for(a=0;a<r.length;a+=1)"R"!=(t=r[a].toString())[0]?(D=t.match(new RegExp(x))[0],f=ssw.ranges(D),D.length>t.length?(w=ssw.swu2fsw(t.slice(-4)).split("x"),console.log(w),c=w[0],l=w[1],f+=ssw.rangeu(ssw.fsw2swu(c-e+"x"+(c+e))),f+=ssw.rangeu(ssw.fsw2swu(l-e+"x"+(l+e)))):f+=o,f=g+f+"("+p+o+")*",f=S?u+f:Z+"?"+f,s.indexOf("-")>0&&(f+=F),b.push(f)):(t=r[a].toString(),n=ssw.swu2fsw(t.slice(1,3)),i=ssw.swu2fsw(t.slice(3,5)),n=ssw.fsw2swu(n.slice(0,4)+"00"),i=ssw.fsw2swu(i.slice(0,4)+"5f"),f=ssw.rangeu(n,i),t.length>5?(c=(w=ssw.swu2fsw(t.slice(5,9)).split("x"))[0],l=w[1],f+=ssw.rangeu(ssw.fsw2swu(c-e+"x"+(c+e))),f+=ssw.rangeu(ssw.fsw2swu(l-e+"x"+(l+e)))):f+=o,f=g+f+"("+p+o+")*",f=S?u+f:Z+"?"+f,s.indexOf("-")>0&&(f+=F),b.push(f));return b.length||(s.indexOf("-")>0&&(f+=F),b.push(u+g)),b},results:function(s,e,r){if(!e)return[];(-1==="BLMR".indexOf(r)||r.length>1)&&(r="");var a,t,n,i,w=ssw.regex(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a=w[f],e=(t=e.match(new RegExp(a,"g")))?t.join(" "):"";return e?(r&&(e=(e=(e=(e=e.replace(/B/g,r)).replace(/L/g,r)).replace(/M/g,r)).replace(/R/g,r)),i=(n=e.split(" ")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},resultsu:function(s,e,r){if(!e)return[];r&&!r.match(new RegExp(ssw.re.swu.box))&&(r="");var a,t,n,i,w=ssw.regexu(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a=w[f],e=(t=e.match(new RegExp(a,"g")))?t.join(" "):"";return e?(r&&(e=(e=(e=(e=e.replace(/\uD836\uDC01/g,r)).replace(/\uD836\uDC02/g,r)).replace(/\uD836\uDC03/g,r)).replace(/\uD836\uDC04/g,r)),i=(n=e.split(" ")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},lines:function(s,e,r){if(!e)return[];(-1==="BLMR".indexOf(r)||r.length>1)&&(r="");var a,t,n,i,w=ssw.regex(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a="^"+(a=w[f])+".*",e=(t=e.match(new RegExp(a,"mg")))?t.join("\n"):"";return e?(r&&(e=(e=(e=(e=e.replace(/B/g,r)).replace(/L/g,r)).replace(/M/g,r)).replace(/R/g,r)),i=(n=e.split("\n")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},linesu:function(s,e,r){if(!e)return[];r&&!r.match(new RegExp(ssw.re.swu.box))&&(r="");var a,t,n,i,w=ssw.regexu(s);if(!w)return[];var f;for(f=0;f<w.length;f+=1)a="^"+(a=w[f])+".*",e=(t=e.match(new RegExp(a,"mg")))?t.join("\n"):"";return e?(r&&(e=(e=(e=(e=e.replace(/\uD836\uDC01/g,r)).replace(/\uD836\uDC02/g,r)).replace(/\uD836\uDC03/g,r)).replace(/\uD836\uDC04/g,r)),i=(n=e.split("\n")).filter(function(s){return!(s in n)&&(n[s]=!0)},{})):i=[],i},convert:function(s,e){var r,a="";if(ssw.sign(s)&&/^[Aa]?([Ss]L?)?$/.test(e)){var t,n,i="S[123][0-9a-f]{2}[0-5][0-9a-f]";if((e.indexOf("A")>-1||e.indexOf("a")>-1)&&(t=s.match(new RegExp("A("+i+")*","g"))))if(n=t[0],e.indexOf("A")>-1)a+=n+"T";else{for(t=n.match(new RegExp("S[123][0-9a-f]{2}","g")),a+="A",r=0;r<t.length;r+=1)a+=t[r]+"uu";a+="T"}if((e.indexOf("S")>-1||e.indexOf("s")>-1)&&(t=s.match(new RegExp(i+"[0-9]{3}x[0-9]{3}","g"))))for(r=0;r<t.length;r+=1)e.indexOf("S")>-1?a+=t[r].slice(0,6):a+=t[r].slice(0,4)+"uu",e.indexOf("L")>-1&&(a+=t[r].slice(6,13))}return a?"Q"+a:""},convertu:function(s,e){var r,a="";if(ssw.sign(s)&&/^[Aa]?([Ss]L?)?$/.test(e)){var t,n;if((e.indexOf("A")>-1||e.indexOf("a")>-1)&&(t=s.match(new RegExp(ssw.re.swu.sort+"("+ssw.re.swu.symbol+")*","g"))))if(n=t[0],e.indexOf("A")>-1)a+=n.replace(/\uD836\uDC00/g,"A")+"T";else{for(t=n.match(new RegExp(ssw.re.swu.symbol,"g")),a+="A",r=0;r<t.length;r+=1)a+=t[r]+"fr";a+="T"}if((e.indexOf("S")>-1||e.indexOf("s")>-1)&&(t=s.match(new RegExp(ssw.re.swu.symbol+ssw.re.swu.coord,"g"))))for(r=0;r<t.length;r+=1)e.indexOf("S")>-1?a+=t[r].slice(0,2):a+=t[r].slice(0,2)+"fr",e.indexOf("L")>-1&&(a+=t[r].slice(2,6))}return a?"Q"+a:""},paragraph:function(s){var e=ssw.chars(s);return'<span class="outside"><span class="middle"><span class="inside">'+(ssw.parse(s,e,!0).all||[]).map(function(s){"swu"==e&&(s=ssw.swu2fsw(s));var r=s.match(/Z([0-9]+(\.[0-9]+)?)/);r=r?parseFloat(r[1]):1;var a=ssw.bbox(s).split(" "),t=(a[1]-a[0])*r,n=(a[3]-a[2])*r,i=(1e3-a[0]-a[1])*r;i+=2,s.indexOf("L")>-1&&(i+=150),s.indexOf("R")>-1&&(i-=150);var w="width: "+t+"px;height: "+n+"px;";return i>0?w+="margin-right: "+i+"px;":i<0&&(w+="border-left: "+(i=-i)+"px solid transparent;"),'<div class="sign" style="'+w+'">'+ssw.svg(s,{copy:e})+"</div>"}).join("")+"</span></span></span>"}};

/**
 * marked - a markdown parser
 * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/markedjs/marked
 */
!function(e){"use strict";var k={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:f,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function a(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||b.defaults,this.rules=k.normal,this.options.pedantic?this.rules=k.pedantic:this.options.gfm&&(this.options.tables?this.rules=k.tables:this.rules=k.gfm)}k._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,k._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,k.def=i(k.def).replace("label",k._label).replace("title",k._title).getRegex(),k.bullet=/(?:[*+-]|\d{1,9}\.)/,k.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,k.item=i(k.item,"gm").replace(/bull/g,k.bullet).getRegex(),k.list=i(k.list).replace(/bull/g,k.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+k.def.source+")").getRegex(),k._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",k._comment=/<!--(?!-?>)[\s\S]*?-->/,k.html=i(k.html,"i").replace("comment",k._comment).replace("tag",k._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),k.paragraph=i(k.paragraph).replace("hr",k.hr).replace("heading",k.heading).replace("lheading",k.lheading).replace("tag",k._tag).getRegex(),k.blockquote=i(k.blockquote).replace("paragraph",k.paragraph).getRegex(),k.normal=d({},k),k.gfm=d({},k.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),k.gfm.paragraph=i(k.paragraph).replace("(?!","(?!"+k.gfm.fences.source.replace("\\1","\\2")+"|"+k.list.source.replace("\\1","\\3")+"|").getRegex(),k.tables=d({},k.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),k.pedantic=d({},k.normal,{html:i("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",k._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),a.rules=k,a.lex=function(e,t){return new a(t).lex(e)},a.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},a.prototype.token=function(e,t){var n,r,s,i,l,o,a,h,p,u,c,g,f,d,m,b;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),1<s[0].length&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e))e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:y(s,"\n")});else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(e))&&(o={type:"table",header:x(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===o.align.length){for(e=e.substring(s[0].length),c=0;c<o.align.length;c++)/^ *-+: *$/.test(o.align[c])?o.align[c]="right":/^ *:-+: *$/.test(o.align[c])?o.align[c]="center":/^ *:-+ *$/.test(o.align[c])?o.align[c]="left":o.align[c]=null;for(c=0;c<o.cells.length;c++)o.cells[c]=x(o.cells[c],o.header.length);this.tokens.push(o)}else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),a={type:"list_start",ordered:d=1<(i=s[2]).length,start:d?+i:"",loose:!1},this.tokens.push(a),n=!(h=[]),f=(s=s[0].match(this.rules.item)).length,c=0;c<f;c++)u=(o=s[c]).length,~(o=o.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(u-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+u+"}","gm"),"")),c!==f-1&&(l=k.bullet.exec(s[c+1])[0],(1<i.length?1===l.length:1<l.length||this.options.smartLists&&l!==i)&&(e=s.slice(c+1).join("\n")+e,c=f-1)),r=n||/\n\n(?!\s*$)/.test(o),c!==f-1&&(n="\n"===o.charAt(o.length-1),r||(r=n)),r&&(a.loose=!0),b=void 0,(m=/^\[[ xX]\] /.test(o))&&(b=" "!==o[1],o=o.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:m,checked:b,loose:r},h.push(p),this.tokens.push(p),this.token(o,!1),this.tokens.push({type:"list_item_end"});if(a.loose)for(f=h.length,c=0;c<f;c++)h[c].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),g=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(e))&&(o={type:"table",header:x(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===o.align.length){for(e=e.substring(s[0].length),c=0;c<o.align.length;c++)/^ *-+: *$/.test(o.align[c])?o.align[c]="right":/^ *:-+: *$/.test(o.align[c])?o.align[c]="center":/^ *:-+ *$/.test(o.align[c])?o.align[c]="left":o.align[c]=null;for(c=0;c<o.cells.length;c++)o.cells[c]=x(o.cells[c].replace(/^ *\| *| *\| *$/g,""),o.header.length);this.tokens.push(o)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:f,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function p(e,t){if(this.options=t||b.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.breaks?this.rules=n.breaks:this.rules=n.gfm)}function r(e){this.options=e||b.defaults}function s(){}function h(e){this.tokens=[],this.token=null,this.options=e||b.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new t}function t(){this.seen={}}function u(e,t){if(t){if(u.escapeTest.test(e))return e.replace(u.escapeReplace,function(e){return u.replacements[e]})}else if(u.escapeTestNoEncode.test(e))return e.replace(u.escapeReplaceNoEncode,function(e){return u.replacements[e]});return e}function c(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function i(n,e){return n=n.source||n,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function l(e,t,n){if(e){try{var r=decodeURIComponent(c(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=function(e,t){o[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?o[" "+e]=e+"/":o[" "+e]=y(e,"/",!0));return e=o[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}n._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",n.em=i(n.em).replace(/punctuation/g,n._punctuation).getRegex(),n._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=i(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,n.tag=i(n.tag).replace("comment",k._comment).replace("attribute",n._attribute).getRegex(),n._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,n._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,n._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,n.link=i(n.link).replace("label",n._label).replace("href",n._href).replace("title",n._title).getRegex(),n.reflink=i(n.reflink).replace("label",n._label).getRegex(),n.normal=d({},n),n.pedantic=d({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:i(/^!?\[(label)\]\((.*?)\)/).replace("label",n._label).getRegex(),reflink:i(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n._label).getRegex()}),n.gfm=d({},n.normal,{escape:i(n.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),n.gfm.url=i(n.gfm.url,"i").replace("email",n.gfm._extended_email).getRegex(),n.breaks=d({},n.gfm,{br:i(n.br).replace("{2,}","*").getRegex(),text:i(n.gfm.text).replace(/\{2,\}/g,"*").getRegex()}),p.rules=n,p.output=function(e,t,n){return new p(t,n).output(e)},p.prototype.output=function(e){for(var t,n,r,s,i,l,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=u(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0];else if(i=this.rules.link.exec(e)){var a=m(i[2],"()");if(-1<a){var h=i[0].length-(i[2].length-a)-(i[3]||"").length;i[2]=i[2].substring(0,a),i[0]=i[0].substring(0,h).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,r=i[2],s=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],t[3]):"":i[3]?i[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),o+=this.outputLink(i,{href:p.escapes(r),title:p.escapes(s)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){o+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(u(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?"mailto:"+(n=u(this.mangle(i[1]))):n=u(i[1]),o+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?o+=this.renderer.text(i[0]):o+=this.renderer.text(u(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r="mailto:"+(n=u(i[0]));else{for(;l=i[0],i[0]=this.rules._backpedal.exec(i[0])[0],l!==i[0];);n=u(i[0]),r="www."===i[1]?"http://"+n:n}e=e.substring(i[0].length),o+=this.renderer.link(r,null,n)}return o},p.escapes=function(e){return e?e.replace(p.rules._escapes,"$1"):e},p.prototype.outputLink=function(e,t){var n=t.href,r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},p.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},p.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,s=0;s<r;s++)t=e.charCodeAt(s),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},r.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,r);null!=s&&s!==e&&(n=!0,e=s)}return r?'<pre><code class="'+this.options.langPrefix+u(r,!0)+'">'+(n?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(null===(e=l(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+u(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},r.prototype.image=function(e,t,n){if(null===(e=l(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},r.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},h.parse=function(e,t){return new h(t).parse(e)},h.prototype.parse=function(e){this.inline=new p(e.links,this.options),this.inlineText=new p(e.links,d({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},h.prototype.next=function(){return this.token=this.tokens.pop()},h.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},h.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},h.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,s="",i="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(s,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var l=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,l,o);case"list_item_start":i="";var a=this.token.loose,h=this.token.checked,p=this.token.task;for(this.token.task&&(i+=this.renderer.checkbox(h));"list_item_end"!==this.next().type;)i+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(i,p,h);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var u='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(u);console.log(u)}},t.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var o={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function d(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function x(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,s=t;0<=--s&&"\\"===n[s];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var s=e.charAt(e.length-r-1);if(s!==t||n){if(s===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function m(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function b(e,n,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null);var s,i,l=(n=d({},b.defaults,n||{})).highlight,t=0;try{s=a.lex(e,n)}catch(e){return r(e)}i=s.length;var o=function(t){if(t)return n.highlight=l,r(t);var e;try{e=h.parse(s,n)}catch(e){t=e}return n.highlight=l,t?r(t):r(null,e)};if(!l||l.length<3)return o();if(delete n.highlight,!i)return o();for(;t<s.length;t++)!function(n){"code"!==n.type?--i||o():l(n.text,n.lang,function(e,t){return e?o(e):null==t||t===n.text?--i||o():(n.text=t,n.escaped=!0,void(--i||o()))})}(s[t])}else try{return n&&(n=d({},b.defaults,n)),h.parse(a.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||b.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}f.exec=f,b.options=b.setOptions=function(e){return d(b.defaults,e),b},b.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new r,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},b.defaults=b.getDefaults(),b.Parser=h,b.parser=h.parse,b.Renderer=r,b.TextRenderer=s,b.Lexer=a,b.lexer=a.lex,b.InlineLexer=p,b.inlineLexer=p.output,b.Slugger=t,b.parse=b,"undefined"!=typeof module&&"object"==typeof exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):e.marked=b}(this||("undefined"!=typeof window?window:global));